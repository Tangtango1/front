/*! @vuemap/vue-amap v2.0.0 */import{defineComponent as y,openBlock as D,createElementBlock as F,renderSlot as nt,createElementVNode as bt,withDirectives as Xo,createCommentVNode as Ko,vShow as Qo}from"vue";function w(e){return e?e instanceof AMap.Map:!1}function S(e){return e?e instanceof AMap.OverlayGroup:!1}function tr(e){return e?e instanceof AMap.IndoorMap:!1}function k(e){return e?e instanceof AMap.VectorLayer:!1}function se(e){if(!e||e.length<4)return e;const t=e.substring(3,e.length);return e[2].toLowerCase()+t}const pe=/^on[A-Z]+/;function le(e,t){if(!e)throw new Error("\u8BF7\u4F20\u5165url");const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.defer=!0,n.src=e,document.body.appendChild(n),t&&n.addEventListener("load",()=>{t()})}function xt(e){return Array.isArray(e)?e.map(xt):e.toArray()}const er=e=>typeof e=="function";function nr(e){return er(e)?{setup:e,name:e.name}:e}var or=function(){var e=[].map.call(arguments,function(t){return t.trim()}).filter(function(t){return t.length}).join("-");return e.length?e.length===1||!/[_.\- ]+/.test(e)?e[0]===e[0].toLowerCase()&&e.slice(1)!==e.slice(1).toLowerCase()?e:e.toLowerCase():e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,n){return n.toUpperCase()}):""},ue=or,rr=function(){var e=ue.apply(ue,arguments);return e.charAt(0).toUpperCase()+e.slice(1)};let At;class ir{constructor(){this._listener=new Map}addListener(t,n,o,r){if(!AMap)throw new Error("please wait for Map API load");if(!t.on)return;t.on(n,o,r),this._listener.get(t)||this._listener.set(t,{});const i=this._listener.get(t);i[n]||(i[n]=[]),i[n].push(o)}removeListener(t,n,o){if(!AMap)throw new Error("please wait for Map API load");if(!t.off||!this._listener.get(t)||!this._listener.get(t)[n])return;const r=this._listener.get(t)[n];if(o){const i=r.indexOf(o);t.off(n,r[i]),r.splice(i,1)}else r.forEach(i=>{t.off(n,i)}),this._listener.get(t)[n]=[]}addListenerOnce(t,n,o,r){return t.on(n,o,r,!0)}trigger(t,n,o){return t.emit(n,o)}clearListeners(t){const n=this._listener.get(t);!n||Object.keys(n).map(o=>{t.clearEvents(o)})}}At=At||new ir;var Et=At,g=nr({inject:{parentInstance:{default:null}},inheritAttrs:!1,props:{visible:{type:Boolean,default:!0},zIndex:{type:Number},reEventWhenUpdate:{type:Boolean,default:!1}},emits:["init"],data(){return{needInitComponents:[],unwatchFns:[],propsRedirect:{},converters:{},isDestroy:!1,cacheEvents:{},isMounted:!1}},created(){this.$amapComponent=null,this.$parentComponent=null},mounted(){this.parentInstance&&(this.parentInstance.$amapComponent?this.register():this.parentInstance.addChildComponent(this))},beforeUnmount(){!this.$amapComponent||(this.unregisterEvents(),this.unwatchFns.forEach(e=>e()),this.unwatchFns=[],this.destroyComponent(),this.isDestroy=!0)},beforeUpdate(){this.reEventWhenUpdate&&this.isMounted&&this.$amapComponent&&this.unregisterEvents()},updated(){this.reEventWhenUpdate&&this.isMounted&&this.$amapComponent&&this.registerEvents()},methods:{getHandlerFun(e){return this[`__${e}`]?this[`__${e}`]:this.$amapComponent?this.$amapComponent[`set${rr(e)}`]:null},convertProps(){const e={},{$props:t,propsRedirect:n}=this;return Object.keys(t).reduce((o,r)=>{let i=r;const a=this.convertSignalProp(i,t[i]);return a===void 0||(n&&n[r]&&(i=n[i]),e[i]=a),o},e)},convertSignalProp(e,t){return this.converters&&this.converters[e]?this.converters[e].call(this,t):t},registerEvents(){const e=this.$attrs;Object.keys(e).forEach(t=>{if(pe.test(t)){const n=se(t);Et.addListener(this.$amapComponent,n,e[t]),this.cacheEvents[n]=e[t]}})},unregisterEvents(){Object.keys(this.cacheEvents).forEach(e=>{Et.removeListener(this.$amapComponent,e,this.cacheEvents[e]),delete this.cacheEvents[e]})},setPropWatchers(){const{propsRedirect:e,$props:t}=this;Object.keys(t).forEach(n=>{let o=n;e&&e[n]&&(o=e[n]);const r=this.getHandlerFun(o);if(!r)return;const i={deep:!1},a=Object.prototype.toString.call(t[n]);(a==="[object Object]"||a==="[object Array]")&&(i.deep=!0);const s=this.$watch(n,p=>{r.call(this.$amapComponent,this.convertSignalProp(n,p))},i);this.unwatchFns.push(s)})},initProps(){["editable","visible","zooms"].forEach(t=>{if(this[t]!==void 0){const n=this.getHandlerFun(t);n&&n.call(this.$amapComponent,this.convertSignalProp(t,this[t]))}})},lazyRegister(){const e=this.parentInstance;e&&e.addChildComponent&&e.addChildComponent(this)},addChildComponent(e){this.needInitComponents.push(e)},createChildren(){for(;this.needInitComponents.length>0;)this.needInitComponents[0].register(),this.needInitComponents.splice(0,1)},register(){this.parentInstance&&!this.$parentComponent&&(this.$parentComponent=this.parentInstance.$amapComponent);const e=this.__initComponent&&this.__initComponent(this.convertProps());e&&e.then?e.then(t=>this.registerRest(t)):this.registerRest(e)},registerRest(e){!this.$amapComponent&&e&&(this.$amapComponent=e),this.registerEvents(),this.initProps(),this.setPropWatchers(),this.$emit("init",this.$amapComponent,this),this.$nextTick(()=>{this.createChildren()}),this.isMounted=!0},$$getInstance(){return this.$amapComponent},destroyComponent(){this.$amapComponent.setMap&&this.$amapComponent.setMap(null),this.$amapComponent.close&&this.$amapComponent.close(),this.$amapComponent.editor&&this.$amapComponent.editor.close()},__visible(e){!!this.$amapComponent&&!!this.$amapComponent.show&&!!this.$amapComponent.hide&&(e===!1?this.$amapComponent.hide():this.$amapComponent.show())},__zIndex(e){this.$amapComponent&&this.$amapComponent.setzIndex&&this.$amapComponent.setzIndex(e)}}});function he(){const e=[],t="0123456789abcdef";for(let n=0;n<36;n++)e[n]=t.substr(Math.floor(Math.random()*16),1);return e[14]="4",e[19]=t.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function de(e){return new AMap.LngLat(e[0],e[1])}const C=(e,t)=>{if(e.install=n=>{for(const o of[e,...Object.values(t??{})])n.component(o.name,o)},t)for(const[n,o]of Object.entries(t))e[n]=o;return e},me=(e=[])=>{const t=[];return{install:o=>{t.includes(o)||(t.push(o),e.forEach(r=>o.use(r)))}}};var ar=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ce={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(ar,function(){function n(u){var d=[];return u.AMapUI&&d.push(o(u.AMapUI)),u.Loca&&d.push(r(u.Loca)),Promise.all(d)}function o(u){return new Promise(function(d,m){var c=[];if(u.plugins)for(var f=0;f<u.plugins.length;f+=1)a.AMapUI.plugins.indexOf(u.plugins[f])==-1&&c.push(u.plugins[f]);if(s.AMapUI===i.failed)m("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(s.AMapUI===i.notload){s.AMapUI=i.loading,a.AMapUI.version=u.version||a.AMapUI.version,f=a.AMapUI.version;var $=document.body||document.head,_=document.createElement("script");_.type="text/javascript",_.src="https://webapi.amap.com/ui/"+f+"/main.js",_.onerror=function(v){s.AMapUI=i.failed,m("\u8BF7\u6C42 AMapUI \u5931\u8D25")},_.onload=function(){if(s.AMapUI=i.loaded,c.length)window.AMapUI.loadUI(c,function(){for(var v=0,b=c.length;v<b;v++){var E=c[v].split("/").slice(-1)[0];window.AMapUI[E]=arguments[v]}for(d();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()});else for(d();p.AMapUI.length;)p.AMapUI.splice(0,1)[0]()},$.appendChild(_)}else s.AMapUI===i.loaded?u.version&&u.version!==a.AMapUI.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):c.length?window.AMapUI.loadUI(c,function(){for(var v=0,b=c.length;v<b;v++){var E=c[v].split("/").slice(-1)[0];window.AMapUI[E]=arguments[v]}d()}):d():u.version&&u.version!==a.AMapUI.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):p.AMapUI.push(function(v){v?m(v):c.length?window.AMapUI.loadUI(c,function(){for(var b=0,E=c.length;b<E;b++){var R=c[b].split("/").slice(-1)[0];window.AMapUI[R]=arguments[b]}d()}):d()})})}function r(u){return new Promise(function(d,m){if(s.Loca===i.failed)m("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(s.Loca===i.notload){s.Loca=i.loading,a.Loca.version=u.version||a.Loca.version;var c=a.Loca.version,f=a.AMap.version.startsWith("2"),$=c.startsWith("2");if(f&&!$||!f&&$)m("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{f=a.key,$=document.body||document.head;var _=document.createElement("script");_.type="text/javascript",_.src="https://webapi.amap.com/loca?v="+c+"&key="+f,_.onerror=function(v){s.Loca=i.failed,m("\u8BF7\u6C42 AMapUI \u5931\u8D25")},_.onload=function(){for(s.Loca=i.loaded,d();p.Loca.length;)p.Loca.splice(0,1)[0]()},$.appendChild(_)}}else s.Loca===i.loaded?u.version&&u.version!==a.Loca.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):d():u.version&&u.version!==a.Loca.version?m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):p.Loca.push(function(v){v?m(v):m()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var i;(function(u){u.notload="notload",u.loading="loading",u.loaded="loaded",u.failed="failed"})(i||(i={}));var a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},p={AMap:[],AMapUI:[],Loca:[]},l=[],h=function(u){typeof u=="function"&&(s.AMap===i.loaded?u(window.AMap):l.push(u))};return{load:function(u){return new Promise(function(d,m){if(s.AMap==i.failed)m("");else if(s.AMap==i.notload){var c=u.key,f=u.version,$=u.plugins;c?(window.AMap&&location.host!=="lbs.amap.com"&&m("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),a.key=c,a.AMap.version=f||a.AMap.version,a.AMap.plugins=$||a.AMap.plugins,s.AMap=i.loading,f=document.body||document.head,window.___onAPILoaded=function(v){if(delete window.___onAPILoaded,v)s.AMap=i.failed,m(v);else for(s.AMap=i.loaded,n(u).then(function(){d(window.AMap)}).catch(m);l.length;)l.splice(0,1)[0]()},$=document.createElement("script"),$.type="text/javascript",$.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+a.AMap.version+"&key="+c+"&plugin="+a.AMap.plugins.join(","),$.onerror=function(v){s.AMap=i.failed,m(v)},f.appendChild($)):m("\u8BF7\u586B\u5199key")}else if(s.AMap==i.loaded)if(u.key&&u.key!==a.key)m("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(u.version&&u.version!==a.AMap.version)m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(c=[],u.plugins)for(f=0;f<u.plugins.length;f+=1)a.AMap.plugins.indexOf(u.plugins[f])==-1&&c.push(u.plugins[f]);c.length?window.AMap.plugin(c,function(){n(u).then(function(){d(window.AMap)}).catch(m)}):n(u).then(function(){d(window.AMap)}).catch(m)}else if(u.key&&u.key!==a.key)m("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(u.version&&u.version!==a.AMap.version)m("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var _=[];if(u.plugins)for(f=0;f<u.plugins.length;f+=1)a.AMap.plugins.indexOf(u.plugins[f])==-1&&_.push(u.plugins[f]);h(function(){_.length?window.AMap.plugin(_,function(){n(u).then(function(){d(window.AMap)}).catch(m)}):n(u).then(function(){d(window.AMap)}).catch(m)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,a={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},p={AMap:[],AMapUI:[],Loca:[]}}}})})(ce);var sr=ce.exports,pr=typeof global=="object"&&global&&global.Object===Object&&global,fe=pr,lr=typeof self=="object"&&self&&self.Object===Object&&self,ur=fe||lr||Function("return this")(),q=ur,hr=q.Symbol,ut=hr,ye=Object.prototype,dr=ye.hasOwnProperty,mr=ye.toString,ot=ut?ut.toStringTag:void 0;function cr(e){var t=dr.call(e,ot),n=e[ot];try{e[ot]=void 0;var o=!0}catch{}var r=mr.call(e);return o&&(t?e[ot]=n:delete e[ot]),r}var fr=Object.prototype,yr=fr.toString;function gr(e){return yr.call(e)}var Cr="[object Null]",vr="[object Undefined]",ge=ut?ut.toStringTag:void 0;function ht(e){return e==null?e===void 0?vr:Cr:ge&&ge in Object(e)?cr(e):gr(e)}function rt(e){return e!=null&&typeof e=="object"}var _r=Array.isArray,Mt=_r;function G(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ce(e){return e}var $r="[object AsyncFunction]",br="[object Function]",xr="[object GeneratorFunction]",Ar="[object Proxy]";function wt(e){if(!G(e))return!1;var t=ht(e);return t==br||t==xr||t==$r||t==Ar}var Er=q["__core-js_shared__"],St=Er,ve=function(){var e=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Mr(e){return!!ve&&ve in e}var wr=Function.prototype,Sr=wr.toString;function kr(e){if(e!=null){try{return Sr.call(e)}catch{}try{return e+""}catch{}}return""}var Or=/[\\^$.*+?()[\]{}|]/g,Lr=/^\[object .+?Constructor\]$/,Ir=Function.prototype,Pr=Object.prototype,Br=Ir.toString,Dr=Pr.hasOwnProperty,Fr=RegExp("^"+Br.call(Dr).replace(Or,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tr(e){if(!G(e)||Mr(e))return!1;var t=wt(e)?Fr:Lr;return t.test(kr(e))}function Nr(e,t){return e==null?void 0:e[t]}function kt(e,t){var n=Nr(e,t);return Tr(n)?n:void 0}var _e=Object.create,jr=function(){function e(){}return function(t){if(!G(t))return{};if(_e)return _e(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Rr=jr;function zr(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ur(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}var Wr=800,Gr=16,Vr=Date.now;function Zr(e){var t=0,n=0;return function(){var o=Vr(),r=Gr-(o-n);if(n=o,r>0){if(++t>=Wr)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function qr(e){return function(){return e}}var Hr=function(){try{var e=kt(Object,"defineProperty");return e({},"",{}),e}catch{}}(),dt=Hr,Jr=dt?function(e,t){return dt(e,"toString",{configurable:!0,enumerable:!1,value:qr(t),writable:!0})}:Ce,Yr=Jr,Xr=Zr(Yr),Kr=Xr,Qr=9007199254740991,ti=/^(?:0|[1-9]\d*)$/;function $e(e,t){var n=typeof e;return t=t??Qr,!!t&&(n=="number"||n!="symbol"&&ti.test(e))&&e>-1&&e%1==0&&e<t}function Ot(e,t,n){t=="__proto__"&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function mt(e,t){return e===t||e!==e&&t!==t}var ei=Object.prototype,ni=ei.hasOwnProperty;function oi(e,t,n){var o=e[t];(!(ni.call(e,t)&&mt(o,n))||n===void 0&&!(t in e))&&Ot(e,t,n)}function ri(e,t,n,o){var r=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],p=o?o(n[s],e[s],s,n,e):void 0;p===void 0&&(p=e[s]),r?Ot(n,s,p):oi(n,s,p)}return n}var be=Math.max;function ii(e,t,n){return t=be(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,i=be(o.length-t,0),a=Array(i);++r<i;)a[r]=o[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=o[r];return s[t]=n(a),zr(e,this,s)}}function ai(e,t){return Kr(ii(e,t,Ce),e+"")}var si=9007199254740991;function xe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=si}function Lt(e){return e!=null&&xe(e.length)&&!wt(e)}function pi(e,t,n){if(!G(n))return!1;var o=typeof t;return(o=="number"?Lt(n)&&$e(t,n.length):o=="string"&&t in n)?mt(n[t],e):!1}function li(e){return ai(function(t,n){var o=-1,r=n.length,i=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(r--,i):void 0,a&&pi(n[0],n[1],a)&&(i=r<3?void 0:i,r=1),t=Object(t);++o<r;){var s=n[o];s&&e(t,s,o,i)}return t})}var ui=Object.prototype;function Ae(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ui;return e===n}function hi(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}var di="[object Arguments]";function Ee(e){return rt(e)&&ht(e)==di}var Me=Object.prototype,mi=Me.hasOwnProperty,ci=Me.propertyIsEnumerable,fi=Ee(function(){return arguments}())?Ee:function(e){return rt(e)&&mi.call(e,"callee")&&!ci.call(e,"callee")},It=fi;function yi(){return!1}var we=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Se=we&&typeof module=="object"&&module&&!module.nodeType&&module,gi=Se&&Se.exports===we,ke=gi?q.Buffer:void 0,Ci=ke?ke.isBuffer:void 0,vi=Ci||yi,Oe=vi,_i="[object Arguments]",$i="[object Array]",bi="[object Boolean]",xi="[object Date]",Ai="[object Error]",Ei="[object Function]",Mi="[object Map]",wi="[object Number]",Si="[object Object]",ki="[object RegExp]",Oi="[object Set]",Li="[object String]",Ii="[object WeakMap]",Pi="[object ArrayBuffer]",Bi="[object DataView]",Di="[object Float32Array]",Fi="[object Float64Array]",Ti="[object Int8Array]",Ni="[object Int16Array]",ji="[object Int32Array]",Ri="[object Uint8Array]",zi="[object Uint8ClampedArray]",Ui="[object Uint16Array]",Wi="[object Uint32Array]",x={};x[Di]=x[Fi]=x[Ti]=x[Ni]=x[ji]=x[Ri]=x[zi]=x[Ui]=x[Wi]=!0,x[_i]=x[$i]=x[Pi]=x[bi]=x[Bi]=x[xi]=x[Ai]=x[Ei]=x[Mi]=x[wi]=x[Si]=x[ki]=x[Oi]=x[Li]=x[Ii]=!1;function Gi(e){return rt(e)&&xe(e.length)&&!!x[ht(e)]}function Vi(e){return function(t){return e(t)}}var Le=typeof exports=="object"&&exports&&!exports.nodeType&&exports,it=Le&&typeof module=="object"&&module&&!module.nodeType&&module,Zi=it&&it.exports===Le,Pt=Zi&&fe.process,qi=function(){try{var e=it&&it.require&&it.require("util").types;return e||Pt&&Pt.binding&&Pt.binding("util")}catch{}}(),Ie=qi,Pe=Ie&&Ie.isTypedArray,Hi=Pe?Vi(Pe):Gi,Be=Hi,Ji=Object.prototype,Yi=Ji.hasOwnProperty;function Xi(e,t){var n=Mt(e),o=!n&&It(e),r=!n&&!o&&Oe(e),i=!n&&!o&&!r&&Be(e),a=n||o||r||i,s=a?hi(e.length,String):[],p=s.length;for(var l in e)(t||Yi.call(e,l))&&!(a&&(l=="length"||r&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||$e(l,p)))&&s.push(l);return s}function Ki(e,t){return function(n){return e(t(n))}}function Qi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var ta=Object.prototype,ea=ta.hasOwnProperty;function na(e){if(!G(e))return Qi(e);var t=Ae(e),n=[];for(var o in e)o=="constructor"&&(t||!ea.call(e,o))||n.push(o);return n}function De(e){return Lt(e)?Xi(e,!0):na(e)}var oa=kt(Object,"create"),at=oa;function ra(){this.__data__=at?at(null):{},this.size=0}function ia(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var aa="__lodash_hash_undefined__",sa=Object.prototype,pa=sa.hasOwnProperty;function la(e){var t=this.__data__;if(at){var n=t[e];return n===aa?void 0:n}return pa.call(t,e)?t[e]:void 0}var ua=Object.prototype,ha=ua.hasOwnProperty;function da(e){var t=this.__data__;return at?t[e]!==void 0:ha.call(t,e)}var ma="__lodash_hash_undefined__";function ca(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=at&&t===void 0?ma:t,this}function V(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}V.prototype.clear=ra,V.prototype.delete=ia,V.prototype.get=la,V.prototype.has=da,V.prototype.set=ca;function fa(){this.__data__=[],this.size=0}function ct(e,t){for(var n=e.length;n--;)if(mt(e[n][0],t))return n;return-1}var ya=Array.prototype,ga=ya.splice;function Ca(e){var t=this.__data__,n=ct(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():ga.call(t,n,1),--this.size,!0}function va(e){var t=this.__data__,n=ct(t,e);return n<0?void 0:t[n][1]}function _a(e){return ct(this.__data__,e)>-1}function $a(e,t){var n=this.__data__,o=ct(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}function B(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}B.prototype.clear=fa,B.prototype.delete=Ca,B.prototype.get=va,B.prototype.has=_a,B.prototype.set=$a;var ba=kt(q,"Map"),Fe=ba;function xa(){this.size=0,this.__data__={hash:new V,map:new(Fe||B),string:new V}}function Aa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ft(e,t){var n=e.__data__;return Aa(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Ea(e){var t=ft(this,e).delete(e);return this.size-=t?1:0,t}function Ma(e){return ft(this,e).get(e)}function wa(e){return ft(this,e).has(e)}function Sa(e,t){var n=ft(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}function H(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}H.prototype.clear=xa,H.prototype.delete=Ea,H.prototype.get=Ma,H.prototype.has=wa,H.prototype.set=Sa;var ka=Ki(Object.getPrototypeOf,Object),Te=ka,Oa="[object Object]",La=Function.prototype,Ia=Object.prototype,Ne=La.toString,Pa=Ia.hasOwnProperty,Ba=Ne.call(Object);function Da(e){if(!rt(e)||ht(e)!=Oa)return!1;var t=Te(e);if(t===null)return!0;var n=Pa.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ne.call(n)==Ba}function Fa(){this.__data__=new B,this.size=0}function Ta(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Na(e){return this.__data__.get(e)}function ja(e){return this.__data__.has(e)}var Ra=200;function za(e,t){var n=this.__data__;if(n instanceof B){var o=n.__data__;if(!Fe||o.length<Ra-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new H(o)}return n.set(e,t),this.size=n.size,this}function J(e){var t=this.__data__=new B(e);this.size=t.size}J.prototype.clear=Fa,J.prototype.delete=Ta,J.prototype.get=Na,J.prototype.has=ja,J.prototype.set=za;var je=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Re=je&&typeof module=="object"&&module&&!module.nodeType&&module,Ua=Re&&Re.exports===je,ze=Ua?q.Buffer:void 0,Ue=ze?ze.allocUnsafe:void 0;function Wa(e,t){if(t)return e.slice();var n=e.length,o=Ue?Ue(n):new e.constructor(n);return e.copy(o),o}var Ga=q.Uint8Array,We=Ga;function Va(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Za(e,t){var n=t?Va(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function qa(e){return typeof e.constructor=="function"&&!Ae(e)?Rr(Te(e)):{}}function Ha(e){return function(t,n,o){for(var r=-1,i=Object(t),a=o(t),s=a.length;s--;){var p=a[e?s:++r];if(n(i[p],p,i)===!1)break}return t}}var Ja=Ha(),Ya=Ja;function Bt(e,t,n){(n!==void 0&&!mt(e[t],n)||n===void 0&&!(t in e))&&Ot(e,t,n)}function Xa(e){return rt(e)&&Lt(e)}function Dt(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Ka(e){return ri(e,De(e))}function Qa(e,t,n,o,r,i,a){var s=Dt(e,n),p=Dt(t,n),l=a.get(p);if(l){Bt(e,n,l);return}var h=i?i(s,p,n+"",e,t,a):void 0,u=h===void 0;if(u){var d=Mt(p),m=!d&&Oe(p),c=!d&&!m&&Be(p);h=p,d||m||c?Mt(s)?h=s:Xa(s)?h=Ur(s):m?(u=!1,h=Wa(p,!0)):c?(u=!1,h=Za(p,!0)):h=[]:Da(p)||It(p)?(h=s,It(s)?h=Ka(s):(!G(s)||wt(s))&&(h=qa(p))):u=!1}u&&(a.set(p,h),r(h,p,o,i,a),a.delete(p)),Bt(e,n,h)}function Ge(e,t,n,o,r){e!==t&&Ya(t,function(i,a){if(r||(r=new J),G(i))Qa(e,t,a,n,Ge,o,r);else{var s=o?o(Dt(e,a),i,a+"",e,t,r):void 0;s===void 0&&(s=i),Bt(e,a,s)}},De)}var ts=li(function(e,t,n){Ge(e,t,n)}),yt=ts;const es={key:"",version:"2.0",plugins:[],serviceHost:"",securityJsCode:""};function ns(e={}){return e=yt({},es,e),e.serviceHost?window._AMapSecurityConfig={serviceHost:e.serviceHost}:e.securityJsCode&&(window._AMapSecurityConfig={securityJsCode:e.securityJsCode}),sr.load(e)}let Z=null;const os=e=>{Z||(Z||(e.offline?Z=new Promise(t=>{console.log("@vuemap/vue-amap\u79BB\u7EBF\u90E8\u7F72"),t(window.AMap)}):Z=ns(e)),Z.then())};var Ft=y({name:"ElAmap",mixins:[g],provide(){return{parentInstance:this}},props:{vid:{type:String},center:{type:Array},zoom:{type:Number},rotation:{type:Number},pitch:{type:Number},viewMode:{type:String},features:{type:Array},layers:{type:Array},zooms:{type:Array},resizeEnable:{type:Boolean,default:!0},dragEnable:{type:Boolean,default:!0},zoomEnable:{type:Boolean,default:!0},jogEnable:{type:Boolean,default:!0},pitchEnable:{type:Boolean,default:!0},rotateEnable:{type:Boolean,default:!0},animateEnable:{type:Boolean,default:!0},keyboardEnable:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},scrollWheel:{type:Boolean,default:!0},touchZoom:{type:Boolean,default:!0},touchZoomCenter:{type:Number},showLabel:{type:Boolean,default:!0},defaultCursor:{type:String},isHotspot:{type:Boolean},mapStyle:{type:String},wallColor:{type:[String,Array]},roofColor:{type:[String,Array]},showBuildingBlock:{type:Boolean,default:!0},showIndoorMap:{type:Boolean,default:!1},skyColor:{type:[String,Array]},labelRejectMask:{type:Boolean,default:!1},mask:{type:Array},WebGLParams:{type:Object},terrain:{type:Boolean,default:!1}},emits:["update:zoom","update:center","update:rotation","update:pitch"],data(){return{}},computed:{},mounted(){this.createMap()},beforeUnmount(){this.$amapComponent&&(this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null)},methods:{createMap(){Z.then(()=>{const e=this.$el.querySelector(".el-vue-amap"),t=this.vid||he();e.id=t,this.$nextTick(()=>{this.$amapComponent=new AMap.Map(t,this.convertProps()),this.register(),this.bindModelEvents()})}).catch(e=>{console.warn("init map error: ",e)})},bindModelEvents(){this.$amapComponent.on("zoomchange",()=>{this.$emit("update:zoom",this.$amapComponent.getZoom())}),this.$amapComponent.on("rotatechange",()=>{this.$emit("update:rotation",this.$amapComponent.getRotation()),this.$emit("update:pitch",this.$amapComponent.getPitch())}),this.$amapComponent.on("dragging",()=>{this.$emit("update:center",this.getCenter()),this.$emit("update:pitch",this.$amapComponent.getPitch())}),this.$amapComponent.on("touchmove",()=>{this.$emit("update:center",this.getCenter())})},getCenter(){const e=this.$amapComponent.getCenter();return[e.lng,e.lat]},__dragEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({dragEnable:e})},__zoomEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({zoomEnable:e})},__jogEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({jogEnable:e})},__keyboardEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({keyboardEnable:e})},__doubleClickZoom(e){this.$amapComponent&&this.$amapComponent.setStatus({doubleClickZoom:e})},__scrollWheel(e){this.$amapComponent&&this.$amapComponent.setStatus({scrollWheel:e})},__rotateEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({rotateEnable:e})},__resizeEnable(e){this.$amapComponent&&this.$amapComponent.setStatus({resizeEnable:e})},__showIndoorMap(e){this.$amapComponent&&this.$amapComponent.setStatus({showIndoorMap:e})}}});const rs={class:"el-vue-amap-container"},is=bt("div",{class:"el-vue-amap"},null,-1);function as(e,t,n,o,r,i){return D(),F("div",rs,[is,nt(e.$slots,"default")])}Ft.render=as,Ft.__file="src/vue-amap/packages/amap/amap.vue";const Ve=C(Ft);var Ze=y({name:"ElAmapControlControlBar",mixins:[g],props:{position:{type:[String,Object]},offset:{type:Array},showControlButton:{type:Boolean,default:!0}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.ControlBar"],()=>{this.$amapComponent=new AMap.ControlBar(e),this.$parentComponent.addControl(this.$amapComponent),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)}},render(){return null}});Ze.__file="src/vue-amap/packages/control/ControlBar/ControlBar.vue";const qe=C(Ze);var He=y({name:"ElAmapControlHawkEye",mixins:[g],props:{autoMove:{type:Boolean,default:!0},showRectangle:{type:Boolean,default:!0},showButton:{type:Boolean,default:!0},isOpen:{type:Boolean,default:!0},mapStyle:{type:String},layers:{type:Array},width:{type:String},height:{type:String},offset:{type:Array},borderStyle:{type:String},borderColor:{type:String},borderRadius:{type:String},borderWidth:{type:String},buttonSize:{type:String}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.HawkEye"],()=>{this.$amapComponent=new AMap.HawkEye(e),this.$parentComponent.addControl(this.$amapComponent),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)},__isOpen(e){e===!1?this.$amapComponent.close():this.$amapComponent.open()}},render(){return null}});He.__file="src/vue-amap/packages/control/HawkEye/HawkEye.vue";const Je=C(He);var Ye=y({name:"ElAmapControlMapType",mixins:[g],props:{defaultType:{type:Number},showTraffic:{type:Boolean,default:!1},showRoad:{type:Boolean,default:!1}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.MapType"],()=>{this.$amapComponent=new AMap.MapType(e),this.$parentComponent.addControl(this.$amapComponent),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)}},render(){return null}});Ye.__file="src/vue-amap/packages/control/MapType/MapType.vue";const Xe=C(Ye);var Ke=y({name:"ElAmapControlScale",mixins:[g],props:{position:{type:[String,Object]},offset:{type:Array}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.Scale"],()=>{this.$amapComponent=new AMap.Scale(e),this.$parentComponent.addControl(this.$amapComponent),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)}},render(){return null}});Ke.__file="src/vue-amap/packages/control/Scale/Scale.vue";const Qe=C(Ke);var tn=y({name:"ElAmapControlToolBar",mixins:[g],props:{position:{type:[String,Object]},offset:{type:Array}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.ToolBar"],()=>{this.$amapComponent=new AMap.ToolBar(e),this.$parentComponent.addControl(this.$amapComponent),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)}},render(){return null}});tn.__file="src/vue-amap/packages/control/ToolBar/ToolBar.vue";const en=C(tn);var Tt=y({name:"ElAmapSearchBox",mixins:[g],props:{type:{type:String},city:{type:String},datatype:{type:String},citylimit:{type:Boolean,default:!1},inputId:{type:String},inputCustom:{type:Boolean,default:!1},outputId:{type:String},outPutDirAuto:{type:Boolean,default:!0},closeResultOnScroll:{type:Boolean,default:!0},lang:{type:String},placeholder:{type:String}},data(){return{saveInputId:"",saveVisible:!0}},created(){this.saveInputId=he()},methods:{__initComponent(e){return e.inputId&&(this.saveInputId=e.inputId,delete e.inputId),e.visible&&(this.saveVisible=e.visible),e.input=this.saveInputId,e.outputId&&(e.output=e.outputId,delete e.outputId),new Promise(t=>{this.$parentComponent.plugin(["AMap.AutoComplete"],()=>{this.$amapComponent=new AMap.AutoComplete(e),t()})})},__visible(e){this.saveVisible=e},__citylimit(e){this.$amapComponent.setCityLimit(e)}}});const ss={class:"el-vue-search-box-container"},ps=["id","placeholder"];function ls(e,t,n,o,r,i){return Xo((D(),F("div",ss,[e.inputCustom?Ko("v-if",!0):(D(),F("input",{key:0,id:e.saveInputId,type:"text",placeholder:e.placeholder},null,8,ps))],512)),[[Qo,e.visible&&!e.inputCustom]])}Tt.render=ls,Tt.__file="src/vue-amap/packages/control/SearchBox/SearchBox.vue";const nn=C(Tt);var Nt=y({name:"ElAmapInfoWindow",mixins:[g],props:{isCustom:{type:Boolean,default:!1},autoMove:{type:Boolean,default:!0},avoid:{type:Array},closeWhenClickMap:{type:Boolean,default:!1},content:{type:[String,Object]},size:{type:Array},anchor:{type:String},offset:{type:Array},position:{type:Array}},emits:["update:visible"],data(){return{converters:{}}},unmounted(){this.$amapComponent&&this.$amapComponent.close()},updated(){!this.content&&this.$amapComponent&&this.$amapComponent.setContent(this.$refs.info)},methods:{__initComponent(e){if(e.content||(e.content=this.getSlotContent()),this.$amapComponent=new AMap.InfoWindow(e),this.$amapComponent.on("close",()=>{this.$emit("update:visible",!1)}),this.visible!==!1&&this.$amapComponent.open(this.$parentComponent,this.position),!this.content&&this.$amapComponent){const t={attributes:!0,childList:!0,subtree:!0},n=new MutationObserver(()=>{this.$amapComponent.setContent(this.getSlotContent())});n.observe(this.$refs.info,t),this.observer=n}},getSlotContent(){return this.$refs.info},destroyComponent(){this.observer&&(this.observer.disconnect(),this.observer=null),this.$amapComponent&&(this.$amapComponent.getIsOpen()&&this.$amapComponent.close(),this.$amapComponent=null,this.$parentComponent=null)},__position(e){this.visible?this.$amapComponent.open(this.$parentComponent,e):this.$amapComponent.setPosition(e)},__visible(e){const t=this.$amapComponent.getPosition();t&&(e===!1?this.$amapComponent.close():this.$amapComponent.open(this.$parentComponent,[t.lng,t.lat]))}}});const us={style:{display:"none"}},hs={ref:"info"};function ds(e,t,n,o,r,i){return D(),F("div",us,[bt("div",hs,[nt(e.$slots,"default")],512)])}Nt.render=ds,Nt.__file="src/vue-amap/packages/infoWindow/InfoWindow/InfoWindow.vue";const on=C(Nt);var rn=y({name:"ElAmapLayerCanvas",mixins:[g],props:{canvas:{required:!0,type:Object},zooms:{type:Array},bounds:{type:[Array,Object]},opacity:{type:Number}},data(){return{handlers:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.CanvasLayer(e),this.$parentComponent.addLayer(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});rn.__file="src/vue-amap/packages/layer/data/Canvas/Canvas.vue";const an=C(rn);var sn=y({name:"ElAmapLayerCustom",mixins:[g],props:{canvas:{required:!0,type:Object},render:{type:Function},zooms:{type:Array},opacity:{type:Number},alwaysRender:{type:Boolean,default:!1}},data(){return{}},methods:{__initComponent(e){const t=e.canvas;delete e.canvas,this.$amapComponent=new AMap.CustomLayer(t,e),this.$amapComponent.setMap(this.$parentComponent)},destroyComponent(){this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});sn.__file="src/vue-amap/packages/layer/data/Custom/Custom.vue";const pn=C(sn);var ln=y({name:"ElAmapLayerFlexible",mixins:[g],props:{cacheSize:{type:Number},createTile:{type:Function},zooms:{type:Array},opacity:{type:Array},tileSize:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.Flexible(e),this.$amapComponent.setMap(this.$parentComponent)},destroyComponent(){this.$amapComponent.destroy(),this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});ln.__file="src/vue-amap/packages/layer/data/Flexible/Flexible.vue";const un=C(ln);var hn=y({name:"ElAmapLayerGlCustom",mixins:[g],props:{init:{type:Function},render:{type:Function},zooms:{type:Array},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.GLCustomLayer(e),this.$amapComponent.setMap(this.$parentComponent)},destroyComponent(){this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});hn.__file="src/vue-amap/packages/layer/data/GLCustom/GLCustom.vue";const dn=C(hn);var mn=y({name:"ElAmapLayerHeatMap",mixins:[g],props:{radius:{type:Number},gradient:{type:Object},zooms:{type:Array},opacity:{type:Array},config:{type:Object},dataSet:{type:Object}},data(){return{propsRedirect:{config:"3d"}}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.HeatMap"],()=>{delete e.dataSet,this.$amapComponent=new AMap.HeatMap(this.$parentComponent,e),this.dataSet&&this.$amapComponent.setDataSet(this.dataSet),t()})})},destroyComponent(){this.$amapComponent.setDataSet({data:[]}),this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});mn.__file="src/vue-amap/packages/layer/data/HeatMap/HeatMap.vue";const cn=C(mn);var fn=y({name:"ElAmapLayerImage",mixins:[g],props:{url:{type:String,required:!0},zoom:{type:Array},bounds:{type:[Array,Object]},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.ImageLayer(e),this.$parentComponent.addLayer(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null},__url(e){this.$amapComponent.setImageUrl(e)}},render(){return null}});fn.__file="src/vue-amap/packages/layer/data/Image/Image.vue";const yn=C(fn);var jt=y({name:"ElAmapLayerLabels",mixins:[g],provide(){return{parentInstance:this}},props:{zooms:{type:Array},opacity:{type:Number},collision:{type:Boolean,default:!0},allowCollision:{type:Boolean,default:!1}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.LabelsLayer(e),this.$parentComponent.add(this.$amapComponent)},$$add(e){this.$amapComponent.add(e)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}}});function ms(e,t,n,o,r,i){return D(),F("div",null,[nt(e.$slots,"default")])}jt.render=ms,jt.__file="src/vue-amap/packages/layer/data/Labels/Labels.vue";const gn=C(jt);var Rt=y({name:"ElAmapLayerVector",mixins:[g],provide(){return{parentInstance:this}},props:{},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.VectorLayer(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}}});function cs(e,t,n,o,r,i){return D(),F("div",null,[nt(e.$slots,"default")])}Rt.render=cs,Rt.__file="src/vue-amap/packages/layer/data/Vector/Vector.vue";const Cn=C(Rt);var vn=y({name:"ElAmapLayerBuildings",mixins:[g],props:{wallColor:{type:[String,Array]},roofColor:{type:[String,Array]},heightFactor:{type:Number},styleOpts:{type:Object},zooms:{type:Array},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.Buildings(e),this.$parentComponent.add(this.$amapComponent),this.styleOpts&&this.__styleOpts(this.styleOpts)},destroyComponent(){this.$amapComponent.destroy(),this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null},__styleOpts(e){this.$amapComponent.setStyle(e)}},render(){return null}});vn.__file="src/vue-amap/packages/layer/official/Buildings/Buildings.vue";const _n=C(vn);var $n=y({name:"ElAmapLayerDefault",mixins:[g],props:{zoom:{type:Array},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=AMap.createDefaultLayer(e),this.$parentComponent.add(this.$amapComponent)}},render(){return null}});$n.__file="src/vue-amap/packages/layer/official/DefaultLayer/DefaultLayer.vue";const bn=C($n);var xn=y({name:"ElAmapLayerDistrict",mixins:[g],props:{type:{type:String,default:"Country",validator(e){return["World","Country","Province"].indexOf(e)!==-1}},adcode:{type:String},SOC:{type:String},depth:{type:Number},zooms:{type:Array},opacity:{type:Number},styles:{type:Object}},data(){return{}},methods:{__initComponent(e){this.type==="World"?this.$amapComponent=new AMap.DistrictLayer.World(e):this.type==="Country"?this.$amapComponent=new AMap.DistrictLayer.Country(e):this.type==="Province"&&(this.$amapComponent=new AMap.DistrictLayer.Province(e)),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null},__SOC(e){this.$amapComponent.setSOC(e)}},render(){return null}});xn.__file="src/vue-amap/packages/layer/official/DistrictLayer/DistrictLayer.vue";const An=C(xn);var En=y({name:"ElAmapLayerIndoorMap",mixins:[g],props:{opacity:{type:Number},cursor:{type:String},hideFloorBar:{type:Boolean,default:!1}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.IndoorMap"],()=>{this.$amapComponent=new AMap.IndoorMap(e);const n=this.$parentComponent.getLayers();n.push(this.$amapComponent),this.$parentComponent.setLayers(n),t()})})},destroyComponent(){const e=this.$parentComponent.getLayers();let t=-1;for(let n=0;n<e.length;n++)if(tr(e[n])){t=n;break}t>-1&&(e.splice(t,1),this.$parentComponent.setLayers(e)),this.$amapComponent=null,this.$parentComponent=null},__hideFloorBar(e){e===!1?this.$amapComponent.hideFloorBar():this.$amapComponent.showFloorBar()}},render(){return null}});En.__file="src/vue-amap/packages/layer/official/IndoorMap/IndoorMap.vue";const Mn=C(En);var wn=y({name:"ElAmapLayerRoadNet",mixins:[g],props:{zooms:{type:Array},opacity:{type:Number},tileSize:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.RoadNet(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.$amapComponent.destroy(),this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});wn.__file="src/vue-amap/packages/layer/official/RoadNet/RoadNet.vue";const Sn=C(wn);var kn=y({name:"ElAmapLayerSatellite",mixins:[g],props:{zooms:{type:Array},opacity:{type:Number},tileSize:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.Satellite(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.$amapComponent.destroy(),this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});kn.__file="src/vue-amap/packages/layer/official/Satellite/Satellite.vue";const On=C(kn);var Ln=y({name:"ElAmapLayerTile",mixins:[g],props:{tileUrl:{type:String,required:!0},zoom:{type:Array},dataZooms:{type:Array},opacity:{type:Number},tileSize:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Ln.__file="src/vue-amap/packages/layer/official/TileLayer/TileLayer.vue";const In=C(Ln);var Pn=y({name:"ElAmapLayerTraffic",mixins:[g],props:{autoRefresh:{type:Boolean,defult:!0},interval:{type:Number},zooms:{type:Array},opacity:{type:Number},tileSize:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.Traffic(e),this.$parentComponent.add(this.$amapComponent)},stopFresh(){this.$amapComponent&&this.$amapComponent.stopFresh()},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Pn.__file="src/vue-amap/packages/layer/official/Traffic/Traffic.vue";const Bn=C(Pn);var Dn=y({name:"ElAmapLayerMapboxVectorTile",mixins:[g],props:{url:{type:String},zooms:{type:Array},dataZooms:{type:Array},opacity:{type:Number},styles:{type:Object}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.MapboxVectorTileLayer"],()=>{this.$amapComponent=new AMap.MapboxVectorTileLayer(e),this.$parentComponent.addLayer(this.$amapComponent),t()})})},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Dn.__file="src/vue-amap/packages/layer/standard/MapboxVectorTileLayer/MapboxVectorTileLayer.vue";const Fn=C(Dn);var Tn=y({name:"ElAmapLayerWms",mixins:[g],props:{url:{type:String},blend:{type:Boolean,default:!1},params:{type:Object},zooms:{type:Array},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.WMS(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Tn.__file="src/vue-amap/packages/layer/standard/WMS/WMS.vue";const Nn=C(Tn);var jn=y({name:"ElAmapLayerWmts",mixins:[g],props:{url:{type:String},blend:{type:Boolean,default:!1},params:{type:Object},zooms:{type:Array},opacity:{type:Number}},data(){return{}},methods:{__initComponent(e){this.$amapComponent=new AMap.TileLayer.WMS(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});jn.__file="src/vue-amap/packages/layer/standard/WMTS/WMTS.vue";const Rn=C(jn);var zn=y({name:"ElAmapElasticMarker",mixins:[g],props:{position:{type:[Array,Object],required:!0},title:{type:String},offset:{type:[Array,Object]},clickable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},bubble:{type:Boolean,default:!1},zooms:{type:Array},cursor:{type:String},topWhenClick:{type:Boolean,default:!1},zoomStyleMapping:{type:Object},styles:{type:Array},extData:{type:Object,default:()=>null}},emits:["update:position"],data(){return{converters:{}}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.ElasticMarker"],()=>{this.$amapComponent=new AMap.ElasticMarker(e),this.$parentComponent.add(this.$amapComponent),this.bindModelEvents(),t()})})},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitPosition()}),this.$amapComponent.on("touchend",()=>{this.emitPosition()})},emitPosition(){const e=this.$amapComponent.getPosition();this.$emit("update:position",e.toArray())},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});zn.__file="src/vue-amap/packages/marker/ElasticMarker/ElasticMarker.vue";const Un=C(zn);var Wn=y({name:"ElAmapLabelMarker",mixins:[g],props:{name:{type:String},position:{type:[Array,Object],required:!0},zooms:{type:Array},opacity:{type:Number},rank:{type:Number},icon:{type:Object},text:{type:Object},extData:null},data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.LabelMarker(e),this.$parentComponent.add(this.$amapComponent)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Wn.__file="src/vue-amap/packages/marker/LabelMarker/LabelMarker.vue";const Gn=C(Wn);var zt=y({name:"ElAmapMarker",mixins:[g],props:{position:{type:[Array,Object],required:!0},icon:{type:[String,Object]},content:{type:[String,HTMLElement]},title:{type:String},offset:{type:[Array,Object]},anchor:{type:[String,Array]},angle:{type:Number},clickable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},bubble:{type:Boolean,default:!1},zooms:{type:Array},cursor:{type:String},topWhenClick:{type:Boolean,default:!1},label:{type:Object},extData:null},emits:["update:position"],data(){return{withSlot:!1,converters:{}}},methods:{__initComponent(e){if(this.$slots.default&&this.$slots.default().length>0&&(this.withSlot=!0,e.content=this.getSlotContent()),this.$amapComponent=new AMap.Marker(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)&&this.$parentComponent.addOverlay(this.$amapComponent),this.withSlot){const t={attributes:!0,childList:!0,subtree:!0},n=new MutationObserver(()=>{this.$amapComponent.setContent(this.getSlotContent())});n.observe(this.$refs.content,t),this.observer=n}this.bindModelEvents()},getSlotContent(){return this.$refs.content},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitPosition()}),this.$amapComponent.on("touchend",()=>{this.emitPosition()})},emitPosition(){const e=this.$amapComponent.getPosition();this.$emit("update:position",e.toArray())},destroyComponent(){this.observer&&(this.observer.disconnect(),this.observer=null),this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}}});const fs={style:{display:"none"}},ys={ref:"content"};function gs(e,t,n,o,r,i){return D(),F("div",fs,[bt("div",ys,[nt(e.$slots,"default")],512)])}zt.render=gs,zt.__file="src/vue-amap/packages/marker/Marker/Marker.vue";const Vn=C(zt);var Zn=y({name:"ElAmapMarkerCluster",mixins:[g],props:{points:{type:Array,required:!0},gridSize:{type:Number},maxZoom:{type:Number},averageCenter:{type:Boolean,default:!0},clusterByZoomChange:{type:Boolean,default:!1},styles:{type:Array},renderClusterMarker:{type:Function},renderMarker:{type:Function}},data(){return{converters:{}}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.MarkerCluster"],()=>{const n=e.points;delete e.points,this.$amapComponent=new AMap.MarkerCluster(this.$parentComponent,n,e),t()})})},destroyComponent(){this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null},__points(e){this.$amapComponent&&this.$amapComponent.setData(e)}},render(){return null}});Zn.__file="src/vue-amap/packages/marker/MarkerCluster/MarkerCluster.vue";const qn=C(Zn);var Hn=y({name:"ElAmapMassMarks",mixins:[g],props:{data:{type:Array,required:!0},zooms:{type:Array},cursor:{type:String},styles:{type:[Array,Object]}},data(){return{propsRedirect:{styles:"style"},converters:{}}},methods:{__initComponent(e){const t=e.data;delete e.data,this.$amapComponent=new AMap.MassMarks(t,e),this.$amapComponent.setMap(this.$parentComponent)},destroyComponent(){this.$amapComponent.clear(),this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Hn.__file="src/vue-amap/packages/marker/MassMarks/MassMarks.vue";const Jn=C(Hn);var Yn=y({name:"ElAmapText",mixins:[g],props:{position:{type:[Array,Object],required:!0},text:{type:String},title:{type:String},offset:{type:[Array,Object]},anchor:{type:[String,Array]},angle:{type:Number},clickable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},bubble:{type:Boolean,default:!1},zooms:{type:Array},cursor:{type:String},topWhenClick:{type:Boolean,default:!1},textStyle:{type:Object},extData:null},emits:["update:position"],data(){return{propsRedirect:{textStyle:"style"},converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Text(e),this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitPosition()}),this.$amapComponent.on("touchend",()=>{this.emitPosition()})},emitPosition(){const e=this.$amapComponent.getPosition();this.$emit("update:position",e.toArray())},destroyComponent(){this.$amapComponent.setMap(null),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Yn.__file="src/vue-amap/packages/marker/Text/Text.vue";const Xn=C(Yn);var Y=y({props:{editable:{type:Boolean,default:void 0},editOptions:{type:Object}},data(){return{}},methods:{setEditorEvents(){if(!this.$amapComponent.editor)return;const e=["addnode","adjust","removenode","end","move","add"],t={};Object.keys(this.$attrs).forEach(n=>{if(pe.test(n)){const o=se(n);e.indexOf(o)!==-1&&(t[o]=this.$attrs[n])}}),Object.keys(t).forEach(n=>{Et.addListener(this.$amapComponent.editor,n,t[n])})}}}),Kn=y({name:"ElAmapBezierCurve",mixins:[g,Y],props:{path:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},borderWeight:{type:Number},isOutline:{type:Boolean,default:!1},outlineColor:{type:String},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array},lineJoin:{type:String,validator(e){return["miter","round","bevel"].indexOf(e)!==-1}},lineCap:{type:String,validator(e){return["butt","round","square"].indexOf(e)!==-1}},geodesic:{type:Boolean,default:!1},showDir:{type:Boolean,default:!1}},emits:["update:path"],data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.BezierCurve(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.BezierCurveEditor"],()=>{this.$amapComponent.editor=new AMap.BezierCurveEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("removenode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){this.$emit("update:path",e.getPath())},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__borderWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({borderWeight:e})},__isOutline(e){this.$amapComponent&&this.$amapComponent.setOptions({isOutline:e})},__outlineColor(e){this.$amapComponent&&this.$amapComponent.setOptions({outlineColor:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__lineJoin(e){this.$amapComponent&&this.$amapComponent.setOptions({lineJoin:e})},__lineCap(e){this.$amapComponent&&this.$amapComponent.setOptions({lineCap:e})},__geodesic(e){this.$amapComponent&&this.$amapComponent.setOptions({geodesic:e})},__showDir(e){this.$amapComponent&&this.$amapComponent.setOptions({showDir:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});Kn.__file="src/vue-amap/packages/vector/BezierCurve/BezierCurve.vue";const Qn=C(Kn);var to=y({name:"ElAmapCircle",mixins:[g,Y],props:{center:{type:Array,required:!0},radius:{type:Number,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array}},emits:["update:center","update:radius"],data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Circle(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.CircleEditor"],()=>{this.$amapComponent.editor=new AMap.CircleEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("move",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){this.$emit("update:center",e.getCenter().toArray()),this.$emit("update:radius",e.getRadius())},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__fillColor(e){this.$amapComponent&&this.$amapComponent.setOptions({fillColor:e})},__fillOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({fillOpacity:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});to.__file="src/vue-amap/packages/vector/Circle/Circle.vue";const eo=C(to);var no=y({name:"ElAmapEllipse",mixins:[g,Y],props:{center:{type:Array,required:!0},radius:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array}},emits:["update:center","update:radius"],data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Ellipse(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.EllipseEditor"],()=>{this.$amapComponent.editor=new AMap.EllipseEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("move",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){this.$emit("update:center",e.getCenter().toArray()),this.$emit("update:radius",e.getRadius())},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__fillColor(e){this.$amapComponent&&this.$amapComponent.setOptions({fillColor:e})},__fillOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({fillOpacity:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});no.__file="src/vue-amap/packages/vector/Ellipse/Ellipse.vue";const oo=C(no);var ro=y({name:"ElAmapGeojson",mixins:[g],props:{geo:{type:Object,required:!0},markerOptions:{type:Object},getMarker:{type:Function},polylineOptions:{type:Object},getPolyline:{type:Function},polygonOptions:{type:Object},getPolygon:{type:Function}},data(){return{propsRedirect:{geo:"geoJSON"},converters:{}}},methods:{__initComponent(e){return new Promise(t=>{AMap.plugin(["AMap.GeoJSON"],()=>{e.getMarker||(e.getMarker=this.createMarker),e.getPolyline||(e.getPolyline=this.createPolyline),e.getPolygon||(e.getPolygon=this.createPolygon),this.$amapComponent=new AMap.GeoJSON(e),this.$parentComponent.add(this.$amapComponent),t()})})},createMarker(e,t){let n=this.markerOptions||{};return n=yt({},n,e.properties),n.position=t,new AMap.Marker(n)},createPolyline(e,t){let n=this.polylineOptions||{};return n=yt({},n,e.properties),n.path=t,new AMap.Polyline(n)},createPolygon(e,t){let n=this.polygonOptions||{};return n=yt({},n,e.properties),n.path=t,new AMap.Polygon(n)},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null},__geoJSON(e){this.$amapComponent&&this.$amapComponent.importData(e)}},render(){return null}});ro.__file="src/vue-amap/packages/vector/GeoJSON/GeoJSON.vue";const io=C(ro);var ao=y({name:"ElAmapPolygon",mixins:[g,Y],props:{path:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array}},emits:["update:path"],data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Polygon(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.PolygonEditor"],()=>{this.$amapComponent.editor=new AMap.PolygonEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("removenode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){const n=e.getPath().map(xt);this.$emit("update:path",n)},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__fillColor(e){this.$amapComponent&&this.$amapComponent.setOptions({fillColor:e})},__fillOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({fillOpacity:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});ao.__file="src/vue-amap/packages/vector/Polygon/Polygon.vue";const so=C(ao);var po=y({name:"ElAmapPolyline",mixins:[g,Y],props:{path:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},borderWeight:{type:Number},isOutline:{type:Boolean,default:!1},outlineColor:{type:String},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array},lineJoin:{type:String,validator(e){return["miter","round","bevel"].indexOf(e)!==-1}},lineCap:{type:String,validator(e){return["butt","round","square"].indexOf(e)!==-1}},geodesic:{type:Boolean,default:!1},showDir:{type:Boolean,default:!1}},emits:["update:path"],data(){return{converters:{}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Polyline(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.PolylineEditor"],()=>{this.$amapComponent.editor=new AMap.PolylineEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("removenode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){const n=e.getPath().map(xt);this.$emit("update:path",n)},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__borderWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({borderWeight:e})},__isOutline(e){this.$amapComponent&&this.$amapComponent.setOptions({isOutline:e})},__outlineColor(e){this.$amapComponent&&this.$amapComponent.setOptions({outlineColor:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__lineJoin(e){this.$amapComponent&&this.$amapComponent.setOptions({lineJoin:e})},__lineCap(e){this.$amapComponent&&this.$amapComponent.setOptions({lineCap:e})},__geodesic(e){this.$amapComponent&&this.$amapComponent.setOptions({geodesic:e})},__showDir(e){this.$amapComponent&&this.$amapComponent.setOptions({showDir:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});po.__file="src/vue-amap/packages/vector/Polyline/Polyline.vue";const lo=C(po);var uo=y({name:"ElAmapRectangle",mixins:[g,Y],props:{bounds:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object,default:()=>null},strokeStyle:{type:String,validator(e){return["solid","dashed"].indexOf(e)!==-1}},strokeDasharray:{type:Array}},emits:["update:bounds"],data(){return{converters:{bounds(e){return new AMap.Bounds(de(e[0]),de(e[1]))}}}},methods:{__initComponent(e){this.$amapComponent=new AMap.Rectangle(e),w(this.$parentComponent)?this.$parentComponent.add(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.addOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitModel(this.$amapComponent)}),this.$amapComponent.on("touchend",()=>{this.emitModel(this.$amapComponent)})},createEditor(){return new Promise(e=>{this.$amapComponent.editor?e():AMap.plugin(["AMap.RectangleEditor"],()=>{this.$amapComponent.editor=new AMap.RectangleEditor(this.$parentComponent,this.$amapComponent,this.editOptions),this.setEditorEvents(),this.bindEditorModelEvents(),e()})})},bindEditorModelEvents(){this.$amapComponent.editor.on("addnode",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("adjust",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("move",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("add",e=>{this.emitModel(e.target)}),this.$amapComponent.editor.on("end",e=>{this.emitModel(e.target)})},emitModel(e){const t=e.getBounds(),n=t.getSouthWest(),o=t.getNorthEast(),r=[n.toArray(),o.toArray()];this.$emit("update:bounds",r)},destroyComponent(){this.$amapComponent.editor&&(this.parentInstance.isDestroy||this.$amapComponent.editor.close(),this.$amapComponent.editor=null),this.parentInstance.isDestroy||(w(this.$parentComponent)?this.$parentComponent.remove(this.$amapComponent):S(this.$parentComponent)?this.$parentComponent.removeOverlay(this.$amapComponent):k(this.$parentComponent)&&this.$parentComponent.remove(this.$amapComponent)),this.$amapComponent.destroy&&this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null},__zIndex(e){this.$amapComponent&&this.$amapComponent.setOptions({zIndex:e})},__strokeColor(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeWeight:e})},__fillColor(e){this.$amapComponent&&this.$amapComponent.setOptions({fillColor:e})},__fillOpacity(e){this.$amapComponent&&this.$amapComponent.setOptions({fillOpacity:e})},__strokeStyle(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeStyle:e})},__strokeDasharray(e){this.$amapComponent&&this.$amapComponent.setOptions({strokeDasharray:e})},__editable(e){this.createEditor().then(()=>{e===!0?this.$amapComponent.editor.open():this.$amapComponent.editor.close()})}},render(){return null}});uo.__file="src/vue-amap/packages/vector/Rectangle/Rectangle.vue";const ho=C(uo);var mo=y({name:"ElAmapLayerTiles3d",mixins:[g],props:{url:{type:String,required:!0},threeScriptUrl:{type:String,default:"//a.amap.com/jsapi_demos/static/data3d/lib/three.117.js"},threeGltfLoader:{type:String,default:"//a.amap.com/jsapi_demos/static/data3d/lib/GLTFLoader.117.min.js"},layerStyle:{type:Object}},data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.3DTilesLayer"],()=>{window.THREE?(this.createLayer(e),t()):le(e.threeScriptUrl,()=>{le(e.threeGltfLoader,()=>{this.createLayer(e),t()})})})})},destroyComponent(){this.$amapComponent=null,this.$parentComponent=null},createLayer(e){let t={};e.layerStyle&&(t=JSON.parse(JSON.stringify(e.layerStyle))),this.$amapComponent=new AMap["3DTilesLayer"]({map:this.$parentComponent,url:e.url,style:t}),console.log(this.$amapComponent)}},render(){return null}});mo.__file="src/vue-amap/packages/layer/data/Tiles3D/Tiles3D.vue";const co=C(mo);var fo=y({name:"ElAmapControlGeolocation",mixins:[g],props:{position:{type:String},offset:{type:Array},borderColor:{type:String},borderRadius:{type:String},buttonSize:{type:String},convert:{type:Boolean,default:!0},enableHighAccuracy:{type:Boolean,default:!1},timeout:{type:Number},maximumAge:{type:Number},showButton:{type:Boolean,default:!0},showCircle:{type:Boolean,default:!0},showMarker:{type:Boolean,default:!0},markerOptions:{type:Object},circleOptions:{type:Object},panToLocation:{type:Boolean,default:!0},zoomToAccuracy:{type:Boolean,default:!0},GeoLocationFirst:{type:Boolean,default:!0},noIpLocate:{type:Number},noGeoLocation:{type:Number},useNative:{type:Boolean,default:!1},getCityWhenFail:{type:Boolean,default:!1},needAddress:{type:Boolean,default:!1},extensions:{type:String,validator(e){return["base","all"].indexOf(e)!==-1}}},emits:["complete"],data(){return{}},methods:{__initComponent(e){return new Promise(t=>{this.$parentComponent.plugin(["AMap.Geolocation"],()=>{this.$amapComponent=new AMap.Geolocation(e),this.$parentComponent.addControl(this.$amapComponent),this.$amapComponent.on("complete",n=>{this.$emit("complete",n)}),t()})})},destroyComponent(){this.$amapComponent&&this.$parentComponent&&(this.parentInstance.isDestroy||this.$parentComponent.removeControl(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null)}},render(){return null}});fo.__file="src/vue-amap/packages/control/Geolocation/Geolocation.vue";const yo=C(fo);var go=y({name:"ElAmapCircleMarker",mixins:[g],props:{zIndex:{type:Number},center:{type:Array,required:!0},bubble:{type:Boolean,default:!1},cursor:{type:String},radius:{type:Number},strokeColor:{type:String},strokeOpacity:{type:Number},strokeWeight:{type:Number},fillColor:{type:String},fillOpacity:{type:Number},draggable:{type:Boolean,default:!1},extData:{type:Object}},emits:["update:center"],data(){return{converters:{},handlers:{}}},methods:{__initComponent(e){this.$parentComponent=this.parentInstance.$amapComponent,this.$amapComponent=new AMap.CircleMarker(e),this.$parentComponent.add(this.$amapComponent),this.bindModelEvents()},bindModelEvents(){this.$amapComponent.on("dragend",()=>{this.emitPosition()}),this.$amapComponent.on("touchend",()=>{this.emitPosition()})},emitPosition(){const e=this.$amapComponent.getCenter();this.$emit("update:center",e.toArray())},destroyComponent(){this.parentInstance.isDestroy||this.$parentComponent.remove(this.$amapComponent),this.$amapComponent=null},__strokeColor(e){this.$amapComponent.setOptions({strokeColor:e})},__strokeOpacity(e){this.$amapComponent.setOptions({strokeOpacity:e})},__strokeWeight(e){this.$amapComponent.setOptions({strokeWeight:e})},__fillColor(e){this.$amapComponent.setOptions({fillColor:e})},__fillOpacity(e){this.$amapComponent.setOptions({fillOpacity:e})}},render(){return null}});go.__file="src/vue-amap/packages/marker/CircleMarker/CircleMarker.vue";const Co=C(go);class Cs{constructor(t,n){this.canPlay=!1,this.frame=-1;const o=document.createElement("canvas");this.video=n,n.src=t.url,n.autoplay=!0,n.loop=t.loop;const r={...t,canvas:o};this.canvas=o,this.context=o.getContext("2d"),this.layer=new AMap.CanvasLayer(r),this.initVideoEvents(),this.load()}getLayer(){return this.layer}initVideoEvents(){var t;(t=this.video)==null||t.addEventListener("canplaythrough",()=>{var n,o;this.canvas&&(this.canvas.width=(n=this.video)==null?void 0:n.videoWidth,this.canvas.height=(o=this.video)==null?void 0:o.videoHeight),this.canPlay=!0,this.play()})}load(){var t;(t=this.video)==null||t.load()}play(){var t;this.canPlay&&((t=this.video)==null||t.play(),this.stopRender(),this.render())}pause(){var t;this.stopRender(),(t=this.video)==null||t.pause()}stopRender(){this.frame&&cancelAnimationFrame(this.frame)}render(){var t,n,o,r,i,a,s,p;this.frame=window.requestAnimationFrame(()=>{this.render()}),((t=this.video)==null?void 0:t.paused)?(n=this.video)==null||n.play():((i=this.context)==null||i.clearRect(0,0,(o=this.canvas)==null?void 0:o.width,(r=this.canvas)==null?void 0:r.height),(p=this.context)==null||p.drawImage(this.video,0,0,(a=this.canvas)==null?void 0:a.width,(s=this.canvas)==null?void 0:s.height),this.layer.reFresh())}destroy(){this.stopRender(),this.video&&this.video.pause(),this.video=null}setUrl(t){this.stopRender(),this.canPlay=!1,this.video&&(this.video.src=t,this.load())}setZooms(t){this.getLayer().setZoom(t)}setOpacity(t){this.getLayer().setOpacity(t)}setBounds(t){this.getLayer().setBounds(t)}setzIndex(t){this.getLayer().setzIndex(t)}show(){this.getLayer().show()}hide(){this.getLayer().hide()}}var vs=Cs,Ut=y({name:"ElAmapLayerVideo",mixins:[g],props:{url:{required:!0,type:String},zooms:{type:Array},bounds:{type:[Array,Object]},opacity:{type:Number}},data(){return{handlers:{}}},methods:{__initComponent(e){this.$amapComponent=new vs(e,this.$refs.video),this.$parentComponent.addLayer(this.$amapComponent.getLayer())},destroyComponent(){this.$amapComponent.destroy(),this.parentInstance.isDestroy||this.$parentComponent.removeLayer(this.$amapComponent),this.$amapComponent=null,this.$parentComponent=null},$$play(){this.$amapComponent.play()},$$pause(){this.$amapComponent.pause()}},render(){return null}});const _s={ref:"video",style:{display:"none"},muted:""};function $s(e,t,n,o,r,i){return D(),F("video",_s,null,512)}Ut.render=$s,Ut.__file="src/vue-amap/packages/layer/data/Video/Video.vue";const vo=C(Ut);var _o=y({name:"ElAmapMouseTool",mixins:[g],props:{type:{type:String,required:!0,default:"marker",validator(e){return["marker","circle","rectangle","polyline","polygon","measureArea","rule","rectZoomIn","rectZoomOut"].includes(e)}},drawOptions:{type:Object,default:()=>null},autoClear:{type:Boolean,default:!0},showTooltip:{type:Boolean,default:!0},tooltipTextMap:{type:Object,default:()=>null},textOptions:{type:Object,default:()=>null}},emits:["draw"],data(){return{preMapCursor:"",tipTexts:{marker:"\u5355\u51FB\u5730\u56FE\u9009\u62E9\u70B9\u4F4D",circle:"\u6309\u4F4F\u9F20\u6807\u5DE6\u952E\u62D6\u62FD\u7ED8\u5236\u5706",rectangle:"\u6309\u4F4F\u9F20\u6807\u5DE6\u952E\u62D6\u62FD\u7ED8\u5236\u77E9\u5F62",polyline:"\u5355\u51FB\u5730\u56FE\u9009\u62E9\u62D0\u70B9\uFF0C\u53CC\u51FB\u5730\u56FE\u5B8C\u6210\u6298\u7EBF\u7ED8\u5236",polygon:"\u5355\u51FB\u5730\u56FE\u9009\u62E9\u62D0\u70B9\uFF0C\u53CC\u51FB\u5730\u56FE\u5B8C\u6210\u591A\u8FB9\u5F62\u7ED8\u5236",measureArea:"\u5355\u51FB\u5730\u56FE\u9009\u62E9\u62D0\u70B9\uFF0C\u53CC\u51FB\u5730\u56FE\u5B8C\u6210\u7ED8\u5236\u5E76\u8BA1\u7B97\u9762\u79EF",rule:"\u5355\u51FB\u5730\u56FE\u9009\u62E9\u62D0\u70B9\uFF0C\u53F3\u51FB\u5730\u56FE\u5B8C\u6210\u7ED8\u5236\u5E76\u8BA1\u7B97\u8DDD\u79BB",rectZoomIn:"\u6309\u4F4F\u9F20\u6807\u5DE6\u952E\u62D6\u62FD\u7ED8\u5236\u77E9\u5F62\uFF0C\u677E\u5F00\u5DE6\u952E\u653E\u5927\u5730\u56FE",rectZoomOut:"\u6309\u4F4F\u9F20\u6807\u5DE6\u952E\u62D6\u62FD\u7ED8\u5236\u77E9\u5F62\uFF0C\u677E\u5F00\u5DE6\u952E\u653E\u5927\u5730\u56FE"}}},methods:{__initComponent(){return new Promise(e=>{AMap.plugin(["AMap.MouseTool"],()=>{this.tooltipTextMap&&Object.assign(this.tipTexts,this.tooltipTextMap),this.$amapComponent=new AMap.MouseTool(this.$parentComponent),this.createTooltip(),this.__type(),this.bindEvent(),this.preMapCursor=this.$parentComponent.getDefaultCursor(),this.$parentComponent.setDefaultCursor("crosshair"),e()})})},__type(){const e=this.type;if(this.$amapComponent[e]){const t=this.drawOptions||{};this.$amapComponent[e](t),this.setText(this.tipTexts[e])}},createTooltip(){if(this.showTooltip){const e=this.textOptions||{};e.anchor="top-left",e.clickable=!1,e.bubble=!0,e.offset=[10,10],this.$text=new AMap.Text(e),this.$parentComponent.add(this.$text),this.$parentComponent.on("mousemove",this.getMousePosition)}},getMousePosition(e){const t=e.lnglat;this.$text.setPosition([t.lng,t.lat])},setText(e){this.$text&&this.$text.setText(e)},bindEvent(){this.$amapComponent.on("draw",e=>{const t=this.type;let n;if(t==="marker")n=e.obj.getPosition().toArray();else if(t==="circle")n={center:e.obj.getCenter().toArray(),radius:e.obj.getRadius()};else if(t==="rectangle"){const o=e.obj.getBounds(),r=o.getSouthWest(),i=o.getNorthEast();n=[r.toArray(),i.toArray()]}else if(t==="polyline")n=e.obj.getPath().map(r=>r.toArray());else if(t==="polygon")n=e.obj.getPath().map(r=>r.toArray());else if(t==="measureArea"){const o=e.obj.getPath().map(r=>r.toArray());n=AMap.GeometryUtil.ringArea(o)}else if(t==="rule"){const o=e.obj.getPath().map(r=>r.toArray());n=AMap.GeometryUtil.distanceOfLine(o)}else(t==="rectZoomIn"||t==="rectZoomOut")&&(n=!0);this.$emit("draw",n,e.obj),this.autoClear&&(this.$$clear(),this.__type())})},$$close(e=!0){this.$amapComponent&&this.$amapComponent.close(e)},$$open(){this.__type()},$$clear(){this.$$close(!0)},destroyComponent(){this.parentInstance.isDestroy||(this.$amapComponent.close(!0),this.$parentComponent.setDefaultCursor(this.preMapCursor),this.$text&&(this.$parentComponent.off("mousemove",this.getMousePosition),this.$parentComponent.remove(this.$text),this.$text=null)),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});_o.__file="src/vue-amap/packages/util/MouseTool/MouseTool.vue";const $o=C(_o);class Wt{constructor(){this._listeners={}}on(t,n,o){this._listeners[t]?this._listeners[t].push({callback:n,isOnce:o}):this._listeners[t]=[{callback:n,isOnce:o}]}off(t,n){if(!n)throw new Error("\u53D6\u6D88\u4E8B\u4EF6\u65F6\u9700\u8981\u4F20\u5165\u539F\u56DE\u8C03\u51FD\u6570");const o=this._listeners[t];if(o&&o.length>0){for(let r=0;r<o.length;r++)if(o[r].callback===n){o.splice(r,1);break}}}emit(t,...n){const o=this._listeners[t];if(o&&o.length>0)for(let i=0;i<o.length;i++){const a=o[i];a.callback.call(this,...n),a.isOnce&&(o.splice(i,1),i--)}const r=this._listeners["*"];if(r&&r.length>0)for(let i=0;i<r.length;i++){const a=r[i];a.callback.call(this,t,...n),a.isOnce&&(r.splice(i,1),i--)}}trigger(t,...n){this.emit(t,n)}}function bo(e,t,n){n===void 0&&(n={});var o={type:"Feature"};return(n.id===0||n.id)&&(o.id=n.id),n.bbox&&(o.bbox=n.bbox),o.properties=t||{},o.geometry=e,o}function Gt(e,t,n){n===void 0&&(n={});for(var o=0,r=e;o<r.length;o++){var i=r[o];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return bo(s,t,n)}function bs(e,t,n){n===void 0&&(n={});var o={type:"MultiPolygon",coordinates:e};return bo(o,t,n)}function xo(e){return e.type==="Feature"?e.geometry:e}/**
* splaytree v3.1.1
* Fast Splay tree for Node and browser
*
* @author Alexander Milevski <info@w8r.name>
* @license MIT
* @preserve
*//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function xs(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},o,r,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(h){return p([l,h])}}function p(l){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,r&&(i=l[0]&2?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,r=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(h){l=[6,h],r=0}finally{o=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var T=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function As(e,t){return e>t?1:e<t?-1:0}function N(e,t,n){for(var o=new T(null,null),r=o,i=o;;){var a=n(e,t.key);if(a<0){if(t.left===null)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,t=s,t.left===null)break}i.left=t,i=t,t=t.left}else if(a>0){if(t.right===null)break;if(n(e,t.right.key)>0){var s=t.right;if(t.right=s.left,s.left=t,t=s,t.right===null)break}r.right=t,r=t,t=t.right}else break}return r.right=t.left,i.left=t.right,t.left=o.right,t.right=o.left,t}function Vt(e,t,n,o){var r=new T(e,t);if(n===null)return r.left=r.right=null,r;n=N(e,n,o);var i=o(e,n.key);return i<0?(r.left=n.left,r.right=n,n.left=null):i>=0&&(r.right=n.right,r.left=n,n.right=null),r}function Ao(e,t,n){var o=null,r=null;if(t){t=N(e,t,n);var i=n(t.key,e);i===0?(o=t.left,r=t.right):i<0?(r=t.right,t.right=null,o=t):(o=t.left,t.left=null,r=t)}return{left:o,right:r}}function Es(e,t,n){return t===null?e:(e===null||(t=N(e.key,t,n),t.left=e),t)}function Zt(e,t,n,o,r){if(e){o(""+t+(n?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+r(e)+`
`);var i=t+(n?"    ":"\u2502   ");e.left&&Zt(e.left,i,!1,o,r),e.right&&Zt(e.right,i,!0,o,r)}}var qt=function(){function e(t){t===void 0&&(t=As),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=Vt(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var o=new T(t,n);this._root===null&&(o.left=o.right=null,this._size++,this._root=o);var r=this._comparator,i=N(t,this._root,r),a=r(t,i.key);return a===0?this._root=i:(a<0?(o.left=i.left,o.right=i,i.left=null):a>0&&(o.right=i.right,o.left=i,i.right=null),this._size++,this._root=o),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,o){var r;if(n===null)return null;n=N(t,n,o);var i=o(t,n.key);return i===0?(n.left===null?r=n.right:(r=N(t,n.left,o),r.right=n.right),this._size--,r):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=N(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,o=this._comparator;n;){var r=o(t,n.key);if(r===0)return n;r<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=N(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,o=this._comparator;n;){var r=o(t,n.key);if(r===0)return!0;r<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var o=this._root,r=[],i=!1;!i;)o!==null?(r.push(o),o=o.left):r.length!==0?(o=r.pop(),t.call(n,o),o=o.right):i=!0;return this},e.prototype.range=function(t,n,o,r){for(var i=[],a=this._comparator,s=this._root,p;i.length!==0||s;)if(s)i.push(s),s=s.left;else{if(s=i.pop(),p=a(s.key,n),p>0)break;if(a(s.key,t)>=0&&o.call(r,s))return this;s=s.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var o=n.key;return t.push(o)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var o=n.data;return t.push(o)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,o=!1,r=0,i=[];!o;)if(n)i.push(n),n=n.left;else if(i.length>0){if(n=i.pop(),r===t)return n;r++,n=n.right}else o=!0;return null},e.prototype.next=function(t){var n=this._root,o=null;if(t.right){for(o=t.right;o.left;)o=o.left;return o}for(var r=this._comparator;n;){var i=r(t.key,n.key);if(i===0)break;i<0?(o=n,n=n.left):n=n.right}return o},e.prototype.prev=function(t){var n=this._root,o=null;if(t.left!==null){for(o=t.left;o.right;)o=o.right;return o}for(var r=this._comparator;n;){var i=r(t.key,n.key);if(i===0)break;i<0?n=n.left:(o=n,n=n.right)}return o},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return ws(this._root)},e.prototype.load=function(t,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1);var r=t.length,i=this._comparator;if(o&&Yt(t,n,0,r-1,i),this._root===null)this._root=Ht(t,n,0,r),this._size=r;else{var a=Ss(this.toList(),Ms(t,n),i);r=this._size+r,this._root=Jt({head:a},0,r)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(o){return String(o.key)});var n=[];return Zt(this._root,"",!0,function(o){return n.push(o)},t),n.join("")},e.prototype.update=function(t,n,o){var r=this._comparator,i=Ao(t,this._root,r),a=i.left,s=i.right;r(t,n)<0?s=Vt(n,o,s,r):a=Vt(n,o,a,r),this._root=Es(a,s,r)},e.prototype.split=function(t){return Ao(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t;return xs(this,function(n){switch(n.label){case 0:t=this.minNode(),n.label=1;case 1:return t?[4,t]:[3,3];case 2:return n.sent(),t=this.next(t),[3,1];case 3:return[2]}})},e}();function Ht(e,t,n,o){var r=o-n;if(r>0){var i=n+Math.floor(r/2),a=e[i],s=t[i],p=new T(a,s);return p.left=Ht(e,t,n,i),p.right=Ht(e,t,i+1,o),p}return null}function Ms(e,t){for(var n=new T(null,null),o=n,r=0;r<e.length;r++)o=o.next=new T(e[r],t[r]);return o.next=null,n.next}function ws(e){for(var t=e,n=[],o=!1,r=new T(null,null),i=r;!o;)t?(n.push(t),t=t.left):n.length>0?(t=i=i.next=n.pop(),t=t.right):o=!0;return i.next=null,r.next}function Jt(e,t,n){var o=n-t;if(o>0){var r=t+Math.floor(o/2),i=Jt(e,t,r),a=e.head;return a.left=i,e.head=e.head.next,a.right=Jt(e,r+1,n),a}return null}function Ss(e,t,n){for(var o=new T(null,null),r=o,i=e,a=t;i!==null&&a!==null;)n(i.key,a.key)<0?(r.next=i,i=i.next):(r.next=a,a=a.next),r=r.next;return i!==null?r.next=i:a!==null&&(r.next=a),o.next}function Yt(e,t,n,o,r){if(!(n>=o)){for(var i=e[n+o>>1],a=n-1,s=o+1;;){do a++;while(r(e[a],i)<0);do s--;while(r(e[s],i)>0);if(a>=s)break;var p=e[a];e[a]=e[s],e[s]=p,p=t[a],t[a]=t[s],t[s]=p}Yt(e,t,n,s,r),Yt(e,t,s+1,o,r)}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eo(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t,n){return t&&Eo(e.prototype,t),n&&Eo(e,n),e}var st=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},Xt=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,r=e.ll.y<t.ll.y?t.ll.y:e.ll.y,i=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:r},ur:{x:o,y:i}}},j=Number.EPSILON;j===void 0&&(j=Math.pow(2,-52));var ks=j*j,Kt=function(e,t){if(-j<e&&e<j&&-j<t&&t<j)return 0;var n=e-t;return n*n<ks*e*t?0:e<t?-1:1},Os=function(){function e(){O(this,e),this.reset()}return M(e,[{key:"reset",value:function(){this.xRounder=new Mo,this.yRounder=new Mo}},{key:"round",value:function(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}]),e}(),Mo=function(){function e(){O(this,e),this.tree=new qt,this.round(0)}return M(e,[{key:"round",value:function(t){var n=this.tree.add(t),o=this.tree.prev(n);if(o!==null&&Kt(n.key,o.key)===0)return this.tree.remove(t),o.key;var r=this.tree.next(n);return r!==null&&Kt(n.key,r.key)===0?(this.tree.remove(t),r.key):t}}]),e}(),pt=new Os,lt=function(e,t){return e.x*t.y-e.y*t.x},wo=function(e,t){return e.x*t.x+e.y*t.y},So=function(e,t,n){var o={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y},i=lt(o,r);return Kt(i,0)},gt=function(e){return Math.sqrt(wo(e,e))},Ls=function(e,t,n){var o={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y};return lt(r,o)/gt(r)/gt(o)},Is=function(e,t,n){var o={x:t.x-e.x,y:t.y-e.y},r={x:n.x-e.x,y:n.y-e.y};return wo(r,o)/gt(r)/gt(o)},ko=function(e,t,n){return t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n}},Oo=function(e,t,n){return t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)}},Ps=function(e,t,n,o){if(t.x===0)return Oo(n,o,e.x);if(o.x===0)return Oo(e,t,n.x);if(t.y===0)return ko(n,o,e.y);if(o.y===0)return ko(e,t,n.y);var r=lt(t,o);if(r==0)return null;var i={x:n.x-e.x,y:n.y-e.y},a=lt(i,t)/r,s=lt(i,o)/r,p=e.x+s*t.x,l=n.x+a*o.x,h=e.y+s*t.y,u=n.y+a*o.y,d=(p+l)/2,m=(h+u)/2;return{x:d,y:m}},P=function(){M(e,null,[{key:"compare",value:function(t,n){var o=e.comparePoints(t.point,n.point);return o!==0?o:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:Ct.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}}]);function e(t,n){O(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return M(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var n=t.point.events,o=0,r=n.length;o<r;o++){var i=n[o];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,n=0;n<t;n++){var o=this.point.events[n];if(o.segment.consumedBy===void 0)for(var r=n+1;r<t;r++){var i=this.point.events[r];i.consumedBy===void 0&&o.otherSE.point.events===i.otherSE.point.events&&o.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],n=0,o=this.point.events.length;n<o;n++){var r=this.point.events[n];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var n=this,o=new Map,r=function(i){var a=i.otherSE;o.set(i,{sine:Ls(n.point,t.point,a.point),cosine:Is(n.point,t.point,a.point)})};return function(i,a){o.has(i)||r(i),o.has(a)||r(a);var s=o.get(i),p=s.sine,l=s.cosine,h=o.get(a),u=h.sine,d=h.cosine;return p>=0&&u>=0?l<d?1:l>d?-1:0:p<0&&u<0?l<d?-1:l>d?1:0:u<p?-1:u>p?1:0}}}]),e}(),Bs=0,Ct=function(){M(e,null,[{key:"compare",value:function(t,n){var o=t.leftSE.point.x,r=n.leftSE.point.x,i=t.rightSE.point.x,a=n.rightSE.point.x;if(a<o)return 1;if(i<r)return-1;var s=t.leftSE.point.y,p=n.leftSE.point.y,l=t.rightSE.point.y,h=n.rightSE.point.y;if(o<r){if(p<s&&p<l)return 1;if(p>s&&p>l)return-1;var u=t.comparePoint(n.leftSE.point);if(u<0)return 1;if(u>0)return-1;var d=n.comparePoint(t.rightSE.point);return d!==0?d:-1}if(o>r){if(s<p&&s<h)return-1;if(s>p&&s>h)return 1;var m=n.comparePoint(t.leftSE.point);if(m!==0)return m;var c=t.comparePoint(n.rightSE.point);return c<0?1:c>0?-1:1}if(s<p)return-1;if(s>p)return 1;if(i<a){var f=n.comparePoint(t.rightSE.point);if(f!==0)return f}if(i>a){var $=t.comparePoint(n.rightSE.point);if($<0)return 1;if($>0)return-1}if(i!==a){var _=l-s,v=i-o,b=h-p,E=a-r;if(_>v&&b<E)return 1;if(_<v&&b>E)return-1}return i>a?1:i<a||l<h?-1:l>h?1:t.id<n.id?-1:t.id>n.id?1:0}}]);function e(t,n,o,r){O(this,e),this.id=++Bs,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=o,this.windings=r}return M(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var n=this.leftSE.point,o=this.rightSE.point,r=this.vector();if(n.x===o.x)return t.x===n.x?0:t.x<n.x?1:-1;var i=(t.y-n.y)/r.y,a=n.x+i*r.x;if(t.x===a)return 0;var s=(t.x-n.x)/r.x,p=n.y+s*r.y;return t.y===p?0:t.y<p?-1:1}},{key:"getIntersection",value:function(t){var n=this.bbox(),o=t.bbox(),r=Xt(n,o);if(r===null)return null;var i=this.leftSE.point,a=this.rightSE.point,s=t.leftSE.point,p=t.rightSE.point,l=st(n,s)&&this.comparePoint(s)===0,h=st(o,i)&&t.comparePoint(i)===0,u=st(n,p)&&this.comparePoint(p)===0,d=st(o,a)&&t.comparePoint(a)===0;if(h&&l)return d&&!u?a:!d&&u?p:null;if(h)return u&&i.x===p.x&&i.y===p.y?null:i;if(l)return d&&a.x===s.x&&a.y===s.y?null:s;if(d&&u)return null;if(d)return a;if(u)return p;var m=Ps(i,this.vector(),s,t.vector());return m===null||!st(r,m)?null:pt.round(m.x,m.y)}},{key:"split",value:function(t){var n=[],o=t.events!==void 0,r=new P(t,!0),i=new P(t,!1),a=this.rightSE;this.replaceRightSE(i),n.push(i),n.push(r);var s=new e(r,a,this.rings.slice(),this.windings.slice());return P.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),P.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(r.checkForConsuming(),i.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,o=this.windings.length;n<o;n++)this.windings[n]*=-1}},{key:"consume",value:function(t){for(var n=this,o=t;n.consumedBy;)n=n.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var r=e.compare(n,o);if(r!==0){if(r>0){var i=n;n=o,o=i}if(n.prev===o){var a=n;n=o,o=a}for(var s=0,p=o.rings.length;s<p;s++){var l=o.rings[s],h=o.windings[s],u=n.rings.indexOf(l);u===-1?(n.rings.push(l),n.windings.push(h)):n.windings[u]+=h}o.rings=null,o.windings=null,o.consumedBy=n,o.leftSE.consumedBy=n.leftSE,o.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,o=this._afterState.windings,r=this._afterState.multiPolys,i=0,a=this.rings.length;i<a;i++){var s=this.rings[i],p=this.windings[i],l=n.indexOf(s);l===-1?(n.push(s),o.push(p)):o[l]+=p}for(var h=[],u=[],d=0,m=n.length;d<m;d++)if(o[d]!==0){var c=n[d],f=c.poly;if(u.indexOf(f)===-1)if(c.isExterior)h.push(f);else{u.indexOf(f)===-1&&u.push(f);var $=h.indexOf(c.poly);$!==-1&&h.splice($,1)}}for(var _=0,v=h.length;_<v;_++){var b=h[_].multiPoly;r.indexOf(b)===-1&&r.push(b)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(I.type){case"union":{var o=t.length===0,r=n.length===0;this._isInResult=o!==r;break}case"intersection":{var i,a;t.length<n.length?(i=t.length,a=n.length):(i=n.length,a=t.length),this._isInResult=a===I.numMultiPolys&&i<a;break}case"xor":{var s=Math.abs(t.length-n.length);this._isInResult=s%2==1;break}case"difference":{var p=function(l){return l.length===1&&l[0].isSubject};this._isInResult=p(t)!==p(n);break}default:throw new Error("Unrecognized operation type found ".concat(I.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,o){var r,i,a,s=P.comparePoints(t,n);if(s<0)r=t,i=n,a=1;else if(s>0)r=n,i=t,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var p=new P(r,!0),l=new P(i,!1);return new e(p,l,[o],[a])}}]),e}(),Lo=function(){function e(t,n,o){if(O(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=pt.round(t[0][0],t[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var i=r,a=1,s=t.length;a<s;a++){if(typeof t[a][0]!="number"||typeof t[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var p=pt.round(t[a][0],t[a][1]);p.x===i.x&&p.y===i.y||(this.segments.push(Ct.fromRing(i,p,this)),p.x<this.bbox.ll.x&&(this.bbox.ll.x=p.x),p.y<this.bbox.ll.y&&(this.bbox.ll.y=p.y),p.x>this.bbox.ur.x&&(this.bbox.ur.x=p.x),p.y>this.bbox.ur.y&&(this.bbox.ur.y=p.y),i=p)}(r.x!==i.x||r.y!==i.y)&&this.segments.push(Ct.fromRing(i,r,this))}return M(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,o=this.segments.length;n<o;n++){var r=this.segments[n];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),Ds=function(){function e(t,n){if(O(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Lo(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,r=t.length;o<r;o++){var i=new Lo(t[o],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}return M(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),n=0,o=this.interiorRings.length;n<o;n++)for(var r=this.interiorRings[n].getSweepEvents(),i=0,a=r.length;i<a;i++)t.push(r[i]);return t}}]),e}(),Io=function(){function e(t,n){if(O(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,r=t.length;o<r;o++){var i=new Ds(t[o],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}return M(e,[{key:"getSweepEvents",value:function(){for(var t=[],n=0,o=this.polys.length;n<o;n++)for(var r=this.polys[n].getSweepEvents(),i=0,a=r.length;i<a;i++)t.push(r[i]);return t}}]),e}(),Fs=function(){M(e,null,[{key:"factory",value:function(t){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];if(!(!i.isInResult()||i.ringOut)){for(var a=null,s=i.leftSE,p=i.rightSE,l=[s],h=s.point,u=[];a=s,s=p,l.push(s),s.point!==h;)for(;;){var d=s.getAvailableLinkedEvents();if(d.length===0){var m=l[0].point,c=l[l.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(m.x,",")+" ".concat(m.y,"]. Last matching segment found ends at")+" [".concat(c.x,", ").concat(c.y,"]."))}if(d.length===1){p=d[0].otherSE;break}for(var f=null,$=0,_=u.length;$<_;$++)if(u[$].point===s.point){f=$;break}if(f!==null){var v=u.splice(f)[0],b=l.splice(v.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()));continue}u.push({index:l.length,point:s.point});var E=s.getLeftmostComparator(a);p=d.sort(E)[0].otherSE;break}n.push(new e(l))}}return n}}]);function e(t){O(this,e),this.events=t;for(var n=0,o=t.length;n<o;n++)t[n].segment.ringOut=this;this.poly=null}return M(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,n=[t],o=1,r=this.events.length-1;o<r;o++){var i=this.events[o].point,a=this.events[o+1].point;So(i,t,a)!==0&&(n.push(i),t=i)}if(n.length===1)return null;var s=n[0],p=n[1];So(s,t,p)===0&&n.shift(),n.push(n[0]);for(var l=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,d=[],m=h;m!=u;m+=l)d.push([n[m].x,n[m].y]);return d}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],n=1,o=this.events.length;n<o;n++){var r=this.events[n];P.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),a=i?i.prevInResult():null;;){if(!i)return null;if(!a)return i.ringOut;if(a.ringOut!==i.ringOut)return a.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=a.prevInResult(),a=i?i.prevInResult():null}}}]),e}(),Po=function(){function e(t){O(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return M(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var n=0,o=this.interiorRings.length;n<o;n++){var r=this.interiorRings[n].getGeom();r!==null&&t.push(r)}return t}}]),e}(),Ts=function(){function e(t){O(this,e),this.rings=t,this.polys=this._composePolys(t)}return M(e,[{key:"getGeom",value:function(){for(var t=[],n=0,o=this.polys.length;n<o;n++){var r=this.polys[n].getGeom();r!==null&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];if(!i.poly)if(i.isExteriorRing())n.push(new Po(i));else{var a=i.enclosingRing();a.poly||n.push(new Po(a)),a.poly.addInterior(i)}}return n}}]),e}(),Ns=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ct.compare;O(this,e),this.queue=t,this.tree=new qt(n),this.segments=[]}return M(e,[{key:"process",value:function(t){var n=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),o;var r=t.isLeft?this.tree.insert(n):this.tree.find(n);if(!r)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,a=r,s=void 0,p=void 0;s===void 0;)i=this.tree.prev(i),i===null?s=null:i.key.consumedBy===void 0&&(s=i.key);for(;p===void 0;)a=this.tree.next(a),a===null?p=null:a.key.consumedBy===void 0&&(p=a.key);if(t.isLeft){var l=null;if(s){var h=s.getIntersection(n);if(h!==null&&(n.isAnEndpoint(h)||(l=h),!s.isAnEndpoint(h)))for(var u=this._splitSafely(s,h),d=0,m=u.length;d<m;d++)o.push(u[d])}var c=null;if(p){var f=p.getIntersection(n);if(f!==null&&(n.isAnEndpoint(f)||(c=f),!p.isAnEndpoint(f)))for(var $=this._splitSafely(p,f),_=0,v=$.length;_<v;_++)o.push($[_])}if(l!==null||c!==null){var b=null;if(l===null)b=c;else if(c===null)b=l;else{var E=P.comparePoints(l,c);b=E<=0?l:c}this.queue.remove(n.rightSE),o.push(n.rightSE);for(var R=n.split(b),z=0,U=R.length;z<U;z++)o.push(R[z])}o.length>0?(this.tree.remove(n),o.push(t)):(this.segments.push(n),n.prev=s)}else{if(s&&p){var L=s.getIntersection(p);if(L!==null){if(!s.isAnEndpoint(L))for(var Q=this._splitSafely(s,L),W=0,_t=Q.length;W<_t;W++)o.push(Q[W]);if(!p.isAnEndpoint(L))for(var tt=this._splitSafely(p,L),et=0,$t=tt.length;et<$t;et++)o.push(tt[et])}}this.tree.remove(n)}return o}},{key:"_splitSafely",value:function(t,n){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var r=t.split(n);return r.push(o),t.consumedBy===void 0&&this.tree.insert(t),r}}]),e}(),Bo=typeof process!="undefined"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,js=typeof process!="undefined"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Rs=function(){function e(){O(this,e)}return M(e,[{key:"run",value:function(t,n,o){I.type=t,pt.reset();for(var r=[new Io(n,!0)],i=0,a=o.length;i<a;i++)r.push(new Io(o[i],!1));if(I.numMultiPolys=r.length,I.type==="difference")for(var s=r[0],p=1;p<r.length;)Xt(r[p].bbox,s.bbox)!==null?p++:r.splice(p,1);if(I.type==="intersection"){for(var l=0,h=r.length;l<h;l++)for(var u=r[l],d=l+1,m=r.length;d<m;d++)if(Xt(u.bbox,r[d].bbox)===null)return[]}for(var c=new qt(P.compare),f=0,$=r.length;f<$;f++)for(var _=r[f].getSweepEvents(),v=0,b=_.length;v<b;v++)if(c.insert(_[v]),c.size>Bo)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var E=new Ns(c),R=c.size,z=c.pop();z;){var U=z.key;if(c.size===R){var L=U.segment;throw new Error("Unable to pop() ".concat(U.isLeft?"left":"right"," SweepEvent ")+"[".concat(U.point.x,", ").concat(U.point.y,"] from segment #").concat(L.id," ")+"[".concat(L.leftSE.point.x,", ").concat(L.leftSE.point.y,"] -> ")+"[".concat(L.rightSE.point.x,", ").concat(L.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(c.size>Bo)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(E.segments.length>js)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Q=E.process(U),W=0,_t=Q.length;W<_t;W++){var tt=Q[W];tt.consumedBy===void 0&&c.insert(tt)}R=c.size,z=c.pop()}pt.reset();var et=Fs.factory(E.segments),$t=new Ts(et);return $t.getGeom()}}]),e}(),I=new Rs,zs=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return I.run("union",e,n)},Us=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return I.run("intersection",e,n)},Ws=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return I.run("xor",e,n)},Gs=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return I.run("difference",e,n)},Vs={union:zs,intersection:Us,xor:Ws,difference:Gs};function Zs(e,t,n){n===void 0&&(n={});var o=xo(e),r=xo(t),i=Vs.intersection(o.coordinates,r.coordinates);return i.length===0?null:i.length===1?Gt(i[0],n.properties):bs(i,n.properties)}const A={mergeArray(e,t){if(t.length<5e4)e.push.apply(e,t);else for(let n=0,o=t.length;n<o;n+=1)e.push(t[n])},now:Date.now||function(){return new Date().getTime()},bind(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},forEach(e,t,n){if(e.forEach)return e.forEach(t,n);for(let o=0,r=e.length;o<r;o++)t.call(n,e[o],o)},map(e,t,n){if(e.map)return e.map(t,n);const o=[];for(let r=0,i=e.length;r<i;r++)o[r]=t.call(n,e[r],r);return o},merge(e,t){if(t.length<5e4)Array.prototype.push.apply(e,t);else for(let n=0,o=t.length;n<o;n+=1)e.push(t[n])},arrayIndexOf(e,t,n){if(e.indexOf)return e.indexOf(t,n);let o,r=e,i=r.length>>>0;if(i===0)return-1;const a=0|n;if(a>=i)return-1;for(o=Math.max(a>=0?a:i-Math.abs(a),0);o<i;){if(o in r&&r[o]===t)return o;o++}return-1},extend(e){return e||(e={}),this.extendObjs(e,Array.prototype.slice.call(arguments,1))},extendObjs(e,t){e||(e={});for(let n=0,o=t.length;n<o;n++){const r=t[n];if(r)for(const i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},debounce(e,t,n){let o,r,i,a,s,p=function(){const l=A.now()-a;l<t&&l>=0?o=setTimeout(p,t-l):(o=null,n||(s=e.apply(i,r),o||(i=r=null)))};return function(){i=this,r=arguments,a=A.now();const l=n&&!o;return o||(o=setTimeout(p,t)),l&&(s=e.apply(i,r),i=r=null),s}},throttle(e,t,n){let o,r,i,a=null,s=0;n||(n={});const p=function(){s=n.leading===!1?0:A.now(),a=null,i=e.apply(o,r),a||(o=r=null)};return function(){const l=A.now();s||n.leading!==!1||(s=l);const h=t-(l-s);return o=this,r=arguments,h<=0||h>t?(a&&(clearTimeout(a),a=null),s=l,i=e.apply(o,r),a||(o=r=null)):a||n.trailing===!1||(a=setTimeout(p,h)),i}},escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return`${e}`.replace(/[&<>"']/g,function(n){return t[n]})}};var Qt={BBRFLAG:{I:1,S:2},ADCODES:{COUNTRY:1e5}};function qs(e){return e}function Hs(e){if(e==null)return qs;var t,n,o=e.scale[0],r=e.scale[1],i=e.translate[0],a=e.translate[1];return function(s,p){p||(t=n=0);var l=2,h=s.length,u=new Array(h);for(u[0]=(t+=s[0])*o+i,u[1]=(n+=s[1])*r+a;l<h;)u[l]=s[l],++l;return u}}function Js(e,t){for(var n,o=e.length,r=o-t;r<--o;)n=e[r],e[r++]=e[o],e[o]=n}function Ys(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Do(e,n)})}:Do(e,t)}function Do(e,t){var n=t.id,o=t.bbox,r=t.properties==null?{}:t.properties,i=Xs(e,t);return n==null&&o==null?{type:"Feature",properties:r,geometry:i}:o==null?{type:"Feature",id:n,properties:r,geometry:i}:{type:"Feature",id:n,bbox:o,properties:r,geometry:i}}function Xs(e,t){var n=Hs(e.transform),o=e.arcs;function r(h,u){u.length&&u.pop();for(var d=o[h<0?~h:h],m=0,c=d.length;m<c;++m)u.push(n(d[m],m));h<0&&Js(u,c)}function i(h){return n(h)}function a(h){for(var u=[],d=0,m=h.length;d<m;++d)r(h[d],u);return u.length<2&&u.push(u[0]),u}function s(h){for(var u=a(h);u.length<4;)u.push(u[0]);return u}function p(h){return h.map(s)}function l(h){var u=h.type,d;switch(u){case"GeometryCollection":return{type:u,geometries:h.geometries.map(l)};case"Point":d=i(h.coordinates);break;case"MultiPoint":d=h.coordinates.map(i);break;case"LineString":d=a(h.arcs);break;case"MultiLineString":d=h.arcs.map(a);break;case"Polygon":d=p(h.arcs);break;case"MultiPolygon":d=h.arcs.map(p);break;default:return null}return{type:u,coordinates:d}}return l(t)}function Ks(e,t){let n,o,r,i,a=e;n=t[t.length-2];for(let s=0,p=t.length-1;s<p;s++){o=t[s];const l=a;a=[],r=l[l.length-1];for(let h=0,u=l.length;h<u;h++)i=l[h],te(i,n,o)?(te(r,n,o)||a.push(Fo(n,o,r,i)),a.push(i)):te(r,n,o)&&a.push(Fo(n,o,r,i)),r=i;n=o}return a.length<3?[]:(a.push(a[0]),a)}function Qs(e,t,n){const o=(n[1]-t[1])/(n[0]-t[0])*(e[0]-t[0])+t[1];return Math.abs(o-e[1])<1e-6&&e[0]>=t[0]&&e[0]<=n[0]}function tp(e,t){for(let n=0,o=t.length;n<o-1;n++)if(Qs(e,t[n],t[n+1]))return!0;return!1}function ep(e,t){let n=!1;for(let o=e[0],r=e[1],i=0,a=t.length,s=a-1;i<a;s=i++){const p=t[i][0],l=t[i][1],h=t[s][0],u=t[s][1];l>r!=u>r&&o<(h-p)*(r-l)/(u-l)+p&&(n=!n)}return n}function np(e,t,n){let o,r=t[0],i=t[1];const a=n[0]-r,s=n[1]-i,p=a*a+s*s;return p>0&&(o=((e[0]-r)*a+(e[1]-i)*s)/p,o>1?(r=n[0],i=n[1]):o>0&&(r+=a*o,i+=s*o)),[r,i]}function op(e,t,n){const o=np(e,t,n),r=e[0]-o[0],i=e[1]-o[1];return r*r+i*i}function rp(e,t){let n=Number.MAX_VALUE;for(let o=0,r=t.length;o<r-1;o++){const i=op(e,t[o],t[o+1]);i<n&&(n=i)}return n}function te(e,t,n){return(n[0]-t[0])*(e[1]-t[1])>(n[1]-t[1])*(e[0]-t[0])}function Fo(e,t,n,o){const r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-o[0],n[1]-o[1]],a=e[0]*t[1]-e[1]*t[0],s=n[0]*o[1]-n[1]*o[0],p=1/(r[0]*i[1]-r[1]*i[0]);return[(a*i[0]-s*r[0])*p,(a*i[1]-s*r[1])*p]}var vt={sqClosestDistanceToPolygon:rp,pointOnPolygon:tp,pointInPolygon:ep,polygonClip:Ks};const ee=Qt.BBRFLAG,ne=[];function ip(e,t){const n=[];for(let o=0,r=e.length;o<r;o++){const i=e[o].split("-");let a=i[0],s=i.length>1?i[1]:a;a=parseInt(a,t),s=parseInt(s,t);for(let p=a;p<=s;p++)n.push(p)}return n}function To(e,t,n){if(e[t])throw new Error(`Alreay exists:  ${e[t]}`);e[t]=n}function ap(e){return ne[e]||(ne[e]=[ee.I,e]),ne[e]}function sp(e,t,n){if(e)for(let o=e.split(":"),r=parseInt(o[0],t),i=ip(o[1].split(","),t),a=ap(r),s=0,p=i.length;s<p;s++)To(n,i[s],a)}function pp(e,t,n){if(e){const o=[];let r=e.split(":"),i=parseInt(r[0],t);const a=r[1].split(";");for(let s=0,p=a.length;s<p;s++){r=a[s].split(",");const l=[parseInt(r[0],t),0];r.length>1&&(l[1]=parseInt(r[1],t)),o.push(l)}To(n,i,[ee.S,o])}}function No(e,t){if(!e)return null;const n=e.split(","),o=[];for(let r=0,i=n.length;r<i;r++){if(parseInt(n[r],t)<0)return null;o.push(parseInt(n[r],t))}return o}function lp(e,t){if(!e)return null;const n=e.split(";"),o=[];for(let r=0,i=n.length;r<i;r++)o.push(No(n[r],t));return o}function up(e){let t,n;const o=e.r,r=[],i=e.idx.i.split("|");for(e.idx.i=null,t=0,n=i.length;t<n;t++)sp(i[t],o,r);i.length=0;const a=e.idx.s.split("|");for(e.idx.s=null,t=0,n=a.length;t<n;t++)pp(a[t],o,r);a.length=0,e.idx=null,e.idxList=r,e.mxr&&(e.maxRect=No(e.mxr,o),e.mxr=null),e.mxsr&&(e.maxSubRect=lp(e.mxsr,o),e.mxsr=null)}function hp(e,t,n){for(let o=e.geoData.sub.features,r=0,i=n.length;r<i;r++){const a=n[r],s=o[a[0]],p=s.geometry.coordinates[a[1]][0],l=vt.polygonClip(p,t);!l||l.length<4?console.warn(`Cliped ring length werid: ${l}`):a[2]=l}return!0}function dp(e,t,n){const o=e.bbIndex,r=o.s;(t<0||n<0||n>=o.h||t>=o.w)&&console.warn("Wrong x,y",t,n,o);const i=n*o.w+t,a=o.idxList[i];if(a[0]!==ee.S)return!1;const s=a[1];if(s[0].length>2)return!1;const p=t*r+o.l,l=n*r+o.t;return hp(e,[[p,l],[p+r,l],[p+r,l+r],[p,l+r],[p,l]],s),!0}var jo={prepareGridFeatureClip:dp,buildIdxList:up};class X{constructor(t,n,o,r){this.x=t,this.y=n,this.width=o,this.height=r}static getBoundsItemToExpand(){return new X(Number.MAX_VALUE,Number.MAX_VALUE,-1,-1)}static boundsIntersect(t,n){return t.x<=n.x+n.width&&n.x<=t.x+t.width&&t.y<=n.y+n.height&&n.y<=t.y+t.height}isEmpty(){return this.width<0}expandByPoint(t,n){let o,r,i,a;this.isEmpty()?(o=i=t,r=a=n):(o=this.x,r=this.y,i=this.x+this.width,a=this.y+this.height,t<o?o=t:t>i&&(i=t),n<r?r=n:n>a&&(a=n)),this.x=o,this.y=r,this.width=i-o,this.height=a-r}}function mp(e){const t={},n=e.objects;for(const o in n)t[o]=Ys(e,n[o]);return t}function cp(e){for(let t=e.sub?e.sub.features:[],n=e.parent.properties,o=(n.acroutes||[]).concat([n.adcode]),r=0,i=t.length;r<i;r++)t[r].properties.subFeatureIndex=r,t[r].properties.acroutes=o}function fp(e){if(!e._isBuiled){jo.buildIdxList(e.bbIndex),e.geoData=mp(e.topo),e.geoData.sub&&cp(e.geoData);const t=e.topo.bbox;e.bounds=new X(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.topo=null,e._isBuiled=!0}return e}var yp={buildData:fp};const oe={},K=Math.PI/180,Ro=180/Math.PI,gp=Math.PI/4,zo=.5/Math.PI;function re(e){return oe[e]||(oe[e]=256*Math.pow(2,e)),oe[e]}function Cp(e){let t=e[1],n=e[0]*K,o=t*K;return o=Math.log(Math.tan(gp+o/2)),[n,o]}function vp(e,t){t=t||1;const n=zo,o=.5,r=-n,i=.5;return[t*(n*e[0]+o),t*(r*e[1]+i)]}function _p(e){const t=e[0]*Ro,n=(2*Math.atan(Math.exp(e[1]))-Math.PI/2)*Ro;return[parseFloat(t.toFixed(6)),parseFloat(n.toFixed(6))]}function $p(e,t){const n=zo,o=.5,r=-n,i=.5;return[(e[0]/t-o)/n,(e[1]/t-i)/r]}function Uo(e,t,n){const o=vp(Cp(e),t);return n&&(o[0]=Math.round(o[0]),o[1]=Math.round(o[1])),o}function bp(e,t,n){return Uo(e,re(t),n)}function xp(e,t){const n=re(t),o=$p(e,n);return _p(o)}function Ap(e,t){const n=Math.cos,o=e[1]*K,r=e[0]*K,i=t[1]*K,a=t[0]*K,s=i-o,p=a-r,l=(1-n(s)+(1-n(p))*n(o)*n(i))/2;return 12756274*Math.asin(Math.sqrt(l))}var ie={haversineDistance:Ap,getScale:re,lngLatToPointByScale:Uo,pointToLngLat:xp,lngLatToPoint:bp};class ae{constructor(t,n,o){this.adcode=t,this._data=n,this._sqScaleFactor=n.scale*n.scale,this._opts=Object.assign({nearTolerance:2},o),this.setNearTolerance(this._opts.nearTolerance)}static getPropsOfFeature(t){return t&&t.properties?t.properties:null}static getAdcodeOfFeature(t){return t?t.properties.adcode:null}static doesFeatureHasChildren(t){return!!t&&t.properties.childrenNum>0}setNearTolerance(t){this._opts.nearTolerance=t,this._sqNearTolerance=t*t}getIdealZoom(){return this._data.idealZoom}_getEmptySubFeatureGroupItem(t){return{subFeatureIndex:t,subFeature:this.getSubFeatureByIndex(t),pointsIndexes:[],points:[]}}groupByPosition(t,n){let o,r,i={},a=null;for(o=0,r=t.length;o<r;o++){const p=this.getLocatedSubFeatureIndex(n.call(null,t[o],o));i[p]||(i[p]=this._getEmptySubFeatureGroupItem(p)),i[p].pointsIndexes.push(o),i[p].points.push(t[o]),p<0&&(a=i[p])}const s=[];if(this._data.geoData.sub)for(o=0,r=this._data.geoData.sub.features.length;o<r;o++)s.push(i[o]||this._getEmptySubFeatureGroupItem(o));return a&&s.push(a),i=null,s}getLocatedSubFeatureIndex(t){return this._getLocatedSubFeatureIndexByPixel(this.lngLatToPixel(t))}getSubFeatureByIndex(t){return t>=0?this.getSubFeatures()[t]:null}_getLocatedSubFeatureIndexByPixel(t){if(!this._data.geoData.sub)return-1;const n=this._data,o=n.bbIndex,r=t[0]-o.l,i=t[1]-o.t,a=Math.floor(i/o.s),s=Math.floor(r/o.s);if(s<0||a<0||a>=o.h||s>=o.w)return-1;const p=a*o.w+s,l=o.idxList[p];if(!l)return-1;const h=Qt.BBRFLAG;switch(l[0]){case h.I:return l[1];case h.S:return jo.prepareGridFeatureClip(n,s,a),this._calcLocatedFeatureIndexOfSList(t,l[1]);default:throw new Error(`Unknown BBRFLAG: ${l[0]}`)}}_calcNearestFeatureIndexOfSList(t,n){let o=[];this._data.geoData.sub&&(o=this._data.geoData.sub.features);let r={sq:Number.MAX_VALUE,idx:-1};for(let i=0,a=n.length;i<a;i++){const s=n[i],p=o[s[0]],l=s[2]||p.geometry.coordinates[s[1]][0],h=vt.sqClosestDistanceToPolygon(t,l);h<r.sq&&(r.sq=h,r.idx=s[0])}return r.sq/this._sqScaleFactor<this._sqNearTolerance?r.idx:-1}_calcLocatedFeatureIndexOfSList(t,n){for(let o=this._data.geoData.sub.features,r=0,i=n.length;r<i;r++){const a=n[r],s=o[a[0]],p=a[2]||s.geometry.coordinates[a[1]][0];if(vt.pointInPolygon(t,p)||vt.pointOnPolygon(t,p))return a[0]}return this._calcNearestFeatureIndexOfSList(t,n)}pixelToLngLat(t,n){return ie.pointToLngLat([t,n],this._data.pz)}lngLatToPixel(t){t instanceof AMap.LngLat&&(t=[t.getLng(),t.getLat()]);const n=ie.lngLatToPoint(t,this._data.pz);return[Math.round(n[0]),Math.round(n[1])]}_convertRingCoordsToLngLats(t){const n=[];for(let o=0,r=t.length;o<r;o++)n[o]=this.pixelToLngLat(t[o][0],t[o][1]);return n}_convertPolygonCoordsToLngLats(t){const n=[];for(let o=0,r=t.length;o<r;o++)n[o]=this._convertRingCoordsToLngLats(t[o]);return n}_convertMultiPolygonCoordsToLngLats(t){const n=[];for(let o=0,r=t.length;o<r;o++)n[o]=this._convertPolygonCoordsToLngLats(t[o]);return n}_convertCoordsToLngLats(t,n){switch(t){case"MultiPolygon":return this._convertMultiPolygonCoordsToLngLats(n);default:throw new Error(`Unknown type ${t}`)}}_createLngLatFeature(t,n){const o=Object.assign({},t);return n&&Object.assign(o.properties,n),o.geometry=Object.assign({},o.geometry),o.geometry.coordinates=this._convertCoordsToLngLats(o.geometry.type,o.geometry.coordinates),o}getAdcode(){return this.getProps("adcode")}getName(){return this.getProps("name")}getChildrenNum(){return this.getProps("childrenNum")}getProps(t){const n=ae.getPropsOfFeature(this._data.geoData.parent);return n?t?n[t]:n:null}getParentFeature(){const t=this._data.geoData;return t.lngLatParent||(t.lngLatParent=this._createLngLatFeature(t.parent)),t.lngLatParent}getParentFeatureInPixel(){return this._data.geoData.parent}getSubFeatures(){const t=this._data.geoData;if(!t.sub)return[];if(!t.lngLatSubList){const n=[];for(let o=t.sub.features,r=0,i=o.length;r<i;r++)n[r]=this._createLngLatFeature(o[r]);t.lngLatSubList=n}return[].concat(t.lngLatSubList)}getSubFeaturesInPixel(){return this._data.geoData.sub?[].concat(this._data.geoData.sub.features):[]}getBounds(){const t=this._data;if(!t.lngLatBounds){const n=this._data.bounds;t.lngLatBounds=new AMap.Bounds(this.pixelToLngLat(n.x,n.y+n.height),this.pixelToLngLat(n.x+n.width,n.y))}return t.lngLatBounds}}class Ep extends Wt{constructor(t){super(),this._opts=Object.assign({distDataLoc:"//webapi.amap.com/ui/1.1/ui/geo/DistrictExplorer/assets/d_v2"},t),this._areaNodesForLocating=null,this._areaNodeCache={},this._opts.preload&&this.loadMultiAreaNodes(this._opts.preload)}setAreaNodesForLocating(t){t?Array.isArray(t)||(t=[t]):t=[],this._areaNodesForLocating=t||[]}_loadJson(t,n){const o=this;return fetch(t,{headers:{Accept:"application/json"}}).then(r=>r.json()).then(r=>{n&&n.call(o,null,r)}).catch(r=>{if(!n)throw r;n(r)})}_getAreaNodeDataFileName(t){return`an_${t}.json`}_getAreaNodeDataSrc(t){return`${this._opts.distDataLoc}/${this._getAreaNodeDataFileName(t)}`}loadAreaTree(t){this._loadJson(`${this._opts.distDataLoc}/area_tree.json`,t)}loadCountryNode(t){this.loadAreaNode(Qt.ADCODES.COUNTRY,t)}loadMultiAreaNodes(t,n){let o=[],r=!1,i;function a(s){return function(p,l){r||(i--,p?(n&&n(p),r=!0):(o[s]=l,i===0&&n&&n(null,o)))}}if(t&&t.length){const s=t.length;for(let p=0;p<s;p++)this.loadAreaNode(t[p],n?a(p):null)}else n&&n(null,[])}loadAreaNode(t,n,o,r){if(o=o||this,this._areaNodeCache[t]){if(n){const i=this._areaNodeCache[t];r?n.call(o,null,i,!0):setTimeout(function(){n.call(o,null,i)},0)}}else this._loadJson(this._getAreaNodeDataSrc(t),(i,a)=>{i?n&&n.call(o,i):(this._buildAreaNode(t,a),n&&n.call(o,null,this._areaNodeCache[t]))})}getLocalAreaNode(t){return this._areaNodeCache[t]||null}_buildAreaNode(t,n){if(!this._areaNodeCache[t]){if(!n)throw new Error(`Empty distData: ${t}`);const o=new ae(t,yp.buildData(n),this._opts);this._areaNodeCache[t]=o,this._areaNodesForLocating||(this._areaNodesForLocating=[o])}}clearAreaNodeCacheByAdcode(t){const n=this._areaNodeCache;return delete n[t],!0}destroy(){this._areaNodesForLocating=null,this._areaNodeCache=null,this._opts=null}}class Mp{constructor(t){this.isDistReady=!1,this.nodeMap={},this.waitFnList=[],this.singleDistExplorer=new Ep({}),this._opts=A.extend({topAdcodes:[1e5]},t),this._touchMap={},this.singleDistExplorer.loadAreaTree((n,o)=>{if(n)throw n;if(this.filterAreaTree(o),this.singleCountryNode=o,this.isDistReady=!0,this.waitFnList.length){for(let r=0,i=this.waitFnList.length;r<i;r++)this.waitFnList[r][0].call(this.waitFnList[r][1]);this.waitFnList.length=0}this.singleDistExplorer.loadMultiAreaNodes(this._opts.topAdcodes)})}pixelToLngLat(t,n,o){return ie.pointToLngLat([t,n],o)}getBounds(t){const n=t.bbounds;return new AMap.Bounds(this.pixelToLngLat(n.x,n.y+n.height,20),this.pixelToLngLat(n.x+n.width,n.y,20))}filterAreaTree(t){const n=[t];do{const o=n.pop();this.nodeMap[o.adcode]=o;const r=o.bbox;if(o.bbounds=new X(r[0],r[1],r[2],r[3]),o.bbox=this.getBounds(o),o.children)for(let i=o.children,a=0,s=i.length;a<s;a++)i[a].childIdx=a,n.push(i[a])}while(n.length)}isReady(){return this.isDistReady}getParentAdcode(t,n){if(!n){const o=this.getNodeByAdcode(t);if(!o)return console.warn(`Can not find node: ${t}`),null;n=o.acroutes}return n&&n.length?n[n.length-1]:null}getSubIdx(t){return this.getNodeByAdcode(t).childIdx}getChildrenNum(t){const n=this.getNodeByAdcode(t);return this.getChildrenNumOfNode(n)}getChildrenNumOfNode(t){return t.children?t.children.length:t.childrenNum||0}getNodeByAdcode(t){const n=this.nodeMap[t];if(!n){let o=this.singleDistExplorer.getLocalAreaNode(`${`${t}`.substr(0,4)}00`);if(o||(o=this.singleDistExplorer.getLocalAreaNode(`${`${t}`.substr(0,2)}0000`)),!o)return null;for(let r=o.getSubFeatures(),i=0,a=r.length;i<a;i++)if(r[i].properties.adcode===t)return r[i].properties}return n}getNodeChildren(t){const n=this.getNodeByAdcode(t);if(!n)return null;if(n.children)return n.children;if(n.childrenNum>=0){const o=this.singleDistExplorer.getLocalAreaNode(t);if(!o)return null;const r=[],i=o.getSubFeaturesInPixel();for(let a=0,s=i.length;a<s;a++)r.push(i[a].properties);return r}return null}getExplorer(){return this.singleDistExplorer}traverseCountry(t,n,o,r,i){this.traverseNode(this.singleCountryNode,t,n,o,r,i,[])}getNodeBoundsSize(t,n){const o=this.getPixelZoom(),r=Math.pow(2,o-n);return[t.bbounds.width/r,t.bbounds.height/r]}doesRingRingIntersect(t,n){const o=[t.getNorthWest().toArray(),t.getNorthEast().toArray(),t.getSouthEast().toArray(),t.getSouthWest().toArray(),t.getNorthWest().toArray()],r=[n.getNorthWest().toArray(),n.getNorthEast().toArray(),n.getSouthEast().toArray(),n.getSouthWest().toArray(),n.getNorthWest().toArray()];return!!Zs(Gt([o]),Gt([r]))}traverseNode(t,n,o,r,i,a,s,p){if(!(s&&s.indexOf(t.adcode)>=0)){if(this.doesRingRingIntersect(n,t.bbox)){const l=t.children,h=l&&l.length>0;if(o>t.idealZoom&&h)for(let u=0,d=l.length;u<d;u++)this.traverseNode(l[u],n,o,r,null,a,s);else r.call(a,t)}i&&(p?(p.count++,p.count>=p.total&&i.call(a)):i.call(a))}}onReady(t,n,o){this.isDistReady?o?t.call(n):setTimeout(function(){t.call(n)},0):this.waitFnList.push([t,n])}getPixelZoom(){var t;return(t=this.singleCountryNode)===null||t===void 0?void 0:t.pz}loadAreaNode(t,n,o,r){this.singleDistExplorer.loadAreaNode(t,n,o,r)}isExcludedAdcode(t){const n=this._opts.excludedAdcodes;return n&&n.indexOf(t)>=0}traverseTopNodes(t,n,o,r,i){const a=this._opts.topAdcodes,s=this._opts.excludedAdcodes,p={total:a.length,count:0};for(let l=0,h=a.length;l<h;l++){const u=this.getNodeByAdcode(a[l]);if(!u)throw new Error(`Can not find adcode: ${a[l]}`);this.traverseNode(u,t,n,o,r,i,s,p)}}tryClearCache(t,n){if(!(n<0)){const o=[this.singleCountryNode],r=[],i=this._touchMap;do{const s=o.pop();s.children&&A.mergeArray(o,s.children);const p=i[s.adcode];p&&p!==t&&r.push(s.adcode)}while(o.length);r.sort(function(s,p){const l=i[s]-i[p];return l===0?s-p:l});const a=r.length-n;if(!(a<=0))for(let s=0;s<a;s++)this.singleDistExplorer.clearAreaNodeCacheByAdcode(r[s])&&this.touchAdcode(r[s],null)}}touchAdcode(t,n){this._touchMap[t]=n}destroy(){this.singleDistExplorer.destroy(),this._touchMap={},this.nodeMap={},this.singleDistExplorer=void 0,this._opts=void 0,this.waitFnList=[],this.singleCountryNode=void 0}}function wp(e){return[e.x,e.y]}class Sp{constructor(t){this._data=[],this._pointsMap={},this._opts=A.extend({topAdcode:1e5},t),this.clearData()}clearData(){this._data=[],this._pointsMap={}}setData(t){this.clearData(),this._data=t,this._updatePointsMap(this._opts.topAdcode,"all",t)}_updatePointsMap(t,n,o){let r=this._pointsMap[t];r||(r=this._pointsMap[t]={}),r[n]=o,r[`${n}_pack`]=this._buildPackItemsByAdcode(t,o)}getPointsByAdcode(t,n){return this._pointsMap[t]?this._pointsMap[t][n||"all"]:[]}getPackItemsByAdcode(t,n){return this._pointsMap[t]?this._pointsMap[t][`${n||"all"}_pack`]:[]}_buildPackItemsByAdcode(t,n){const o=this._opts.pointPacker,r=[];for(let i=0,a=n.length;i<a;i++)r[i]=o.call(this._opts.pointPackerThisArg,n[i]);return r}calcDistGroup(t,n,o,r){const i=this._opts.distMgr.getNodeByAdcode(t);let a=i.acroutes||[1e5];n&&i.acroutes&&(a=[].concat(a),a.push(t)),this._calcGroupWithRoutes(a,0,o,r)}_calcGroupWithRoutes(t,n,o,r){const i=()=>{n<t.length-1?this._calcGroupWithRoutes(t,n+1,o,r):o&&o.call(r)},a=t[n];if(this.getPointsByAdcode(a,"__done"))i.call(this);else{const s=this.getPointsByAdcode(a);if(!s)throw new Error(`Not points found:  ${a}`);this._opts.distMgr.getExplorer().loadAreaNode(a,(p,l)=>{this._groupByAreaNode(l,s),i.call(this)},this,!0)}}_groupByAreaNode(t,n){const o=t.groupByPosition(n,wp),r=t.getAdcode()===this._opts.topAdcode,i=[];for(let a=0,s=o.length;a<s;a++){const p=o[a];p.subFeature?(this._updatePointsMap(p.subFeature.properties.adcode,"all",p.points),r&&A.mergeArray(i,p.points)):this._updatePointsMap(t.getAdcode(),"hanging",p.points)}r&&this._updatePointsMap(t.getAdcode(),"all",i),this._updatePointsMap(t.getAdcode(),"__done",!0)}destroy(){this.clearData(),this._opts=null}}var kp=Object.defineProperty,Op=Object.defineProperties,Lp=Object.getOwnPropertyDescriptors,Wo=Object.getOwnPropertySymbols,Ip=Object.prototype.hasOwnProperty,Pp=Object.prototype.propertyIsEnumerable,Go=(e,t,n)=>t in e?kp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vo=(e,t)=>{for(var n in t||(t={}))Ip.call(t,n)&&Go(e,n,t[n]);if(Wo)for(var n of Wo(t))Pp.call(t,n)&&Go(e,n,t[n]);return e},Bp=(e,t)=>Op(e,Lp(t));class Dp extends Wt{constructor(t,n){super(),this.baseId=1,this._currentZoom=2,this._currentFeatures=[],this._loadLeft=0,this._polygonCache=[],this._markerCache=[],this._opts=A.extend({engine:"default",areaNodeCacheLimit:-1,minHeightToShowSubFeatures:630,minSiblingAvgHeightToShowSubFeatures:600,minSubAvgHeightToShowSubFeatures:300,zooms:[2,30],clusterMarkerEventSupport:!0,clusterMarkerClickToShowSub:!0,featureEventSupport:!0,featureClickToShowSub:!1,featureStyleByLevel:{country:{strokeColor:"rgb(31, 119, 180)",strokeOpacity:.9,strokeWeight:2,fillColor:"rgb(49, 163, 84)",fillOpacity:.8},province:{strokeColor:"rgb(31, 119, 180)",strokeOpacity:.9,strokeWeight:2,fillColor:"rgb(116, 196, 118)",fillOpacity:.7},city:{strokeColor:"rgb(31, 119, 180)",strokeOpacity:.9,strokeWeight:2,fillColor:"rgb(161, 217, 155)",fillOpacity:.6},district:{strokeColor:"rgb(31, 119, 180)",strokeOpacity:.9,strokeWeight:2,fillColor:"rgb(199, 233, 192)",fillOpacity:.5}}},n),this._map=this._opts.map,this._createLayer(),this._ins=t,this._isRendering=!1,this._loadLeft=0,this._currentFeatures=[]}_createLayer(){this.markerGroup=new AMap.OverlayGroup,this._map.add(this.markerGroup),this.layer=new AMap.VectorLayer({zIndex:this._opts.zIndex||10,visible:this._opts.visible||!0}),this._map.addLayer(this.layer)}zoomToShowSubFeatures(t,n){const o=this.getMinZoomToShowSub(t);if(o>=3){const r=this._ins.getMap();r&&(n||(n=this._ins._distMgr.getNodeByAdcode(t).center),r.setZoomAndCenter(o,n))}}getPixelRatio(){return Math.min(2,Math.round(window.devicePixelRatio||1))}refreshViewState(){if(!this._ins._distMgr.isReady())return!1;const t=this._ins;if(!t.isReady())return!1;const n=t.getMap(),o=n.getBounds(),r=n.getSize(),i=n.getZoom(3),a=this._opts.zooms[1],s=Math.pow(2,a-i),p=o.getNorthWest(),l=n.lngLatToCoords([p.getLng(),p.getLat()]),h=new X(l[0],l[1],r.width*s,r.height*s);this._currentZoom=i,this._currentScaleFactor=s,this._currentViewBounds=h,this._currentViewBoundsInLngLat=o,this._currentPixelRatio=this.getPixelRatio()}renderViewport(){if(this.refreshViewState(),!this._currentViewBounds)return!1;this._currentRenderId=this.baseId++,this._loadLeft=0,this._currentFeatures=[],this._renderViewDist(this._currentRenderId),this._isRendering=!1}getCurrentRenderId(){return this._currentRenderId}isRenderIdStillValid(t){return t===this._currentRenderId}_renderViewDist(t){const n=[];if(this._currentZoom<this._opts.zooms[0]||this._currentZoom>this._opts.zooms[1]){this.isRenderIdStillValid(t)&&this._prepareFeatures(t,n);return}this._ins.getDistMgr().traverseTopNodes(this._currentViewBoundsInLngLat,this._currentZoom,o=>{n.push(o.adcode)},()=>{this.isRenderIdStillValid(t)&&this._prepareFeatures(t,n)},this)}getMinZoomToShowSub(t){const n=this._ins._distMgr.getNodeByAdcode(t);if(!n||!n.idealZoom)return-1;if(!n._minZoomToShowSub){const o=this._ins.getZooms();for(let r=o[0];r<=o[1];r++)if(this.shouldShowSubOnZoom(n,r)){n._minZoomToShowSub=r;break}}return n._minZoomToShowSub||-1}shouldShowSubOnZoom(t,n){if(!t.idealZoom)return!1;if(t._minZoomToShowSub&&n>=t._minZoomToShowSub)return!0;let o=this._ins._distMgr.getNodeBoundsSize(t,n);if(t.adcode===1e5&&o[1]>400)return!0;if(o[1]<this._opts.minHeightToShowSubFeatures)return!1;let r,i,a;if(t.children){const p=t.children;if(a=0,i=p.length,i){for(r=0;r<i;r++)o=this._ins._distMgr.getNodeBoundsSize(p[r],n),a+=o[1];if(a/i<this._opts.minSubAvgHeightToShowSubFeatures)return!1}}const s=this._ins._distMgr.getParentAdcode(t.adcode,t.acroutes);if(s){const p=this._ins._distMgr.getNodeByAdcode(s),l=p.children;if(l||console.error("No children bound",t,p),i=l.length,i>1){for(a=0,r=0;r<i;r++)l[r].adcode!==t.adcode&&(o=this._ins._distMgr.getNodeBoundsSize(l[r],n),a+=o[1]);if(a/(i-1)<this._opts.minSiblingAvgHeightToShowSubFeatures)return!1}}return!0}_shouldShowSub(t){return!(!t.children||!t.children.length)&&this.shouldShowSubOnZoom(t,this._currentZoom)}_prepareFeatures(t,n){const o=[],r=[];for(let i=0,a=n.length;i<a;i++){const s=this._ins._distMgr.getNodeByAdcode(n[i]);if(!s)throw new Error(`Can not find node: ${n[i]}`);this._shouldShowSub(s)?r.push(n[i]):o.push(n[i])}this._prepareSelfFeatures(t,o),this._prepareSubFeatures(t,r),this._checkLoadFinish(t)}_prepareSelfFeatures(t,n){let o;const r=this._currentZoom;for(let i=0,a=n.length;i<a;i++){const s=this._ins._distMgr.getNodeByAdcode(n[i]);if(o=null,s.acroutes){const p=this._ins._distMgr.getNodeByAdcode(s.acroutes[s.acroutes.length-1]);(!s.idealZoom||r<s.idealZoom-1||Math.abs(r-p.idealZoom)<=Math.abs(s.idealZoom-r))&&(o=p.adcode)}this._loadAndRenderSelf(t,o||n[i],n[i])}}_prepareSubFeatures(t,n){let o,r;for(o=0,r=n.length;o<r;o++)this._loadAndRenderSub(t,n[o])}_renderSelf(t,n,o){let r;if(n===o.getAdcode())r=o.getParentFeature();else{const i=o.getSubFeatures(),a=this._ins._distMgr.getSubIdx(n);if(r=i[a],!r){console.warn("Werid, can not find sub feature",o.getAdcode(),n);return}if(r.properties.adcode!==n){console.warn("Sub adcode not match!!",i,a);return}}this._ins.getDistCounter().calcDistGroup(n,!1,()=>{this.isRenderIdStillValid(t)&&this._prepRenderFeatureInPixel(t,r)},this)}_checkLoadFinish(t){if(this._loadLeft===0){const n=this;setTimeout(function(){n.isRenderIdStillValid(t)&&n._handleRenderFinish()},0)}}_renderSub(t,n){const o=n.getSubFeatures();this._ins.getDistCounter().calcDistGroup(n.getAdcode(),!0,()=>{if(this.isRenderIdStillValid(t))for(let r=0,i=o.length;r<i;r++)this._prepRenderFeatureInPixel(t,o[r])},this)}_handleRenderFinish(){this._tryFreeMemery(),this._renderAllFeature()}_renderAllFeature(){this._renderAllFeatureByDefault()}_renderAllFeatureByDefault(){var t,n;const o=[],r=[],i=[],a=[];for(let s=0;s<this._polygonCache.length;s++){const p=this._polygonCache[s],l=p.getExtData()._data.adcode;let h=!1;for(let u=0;u<this._currentFeatures.length;u++){const d=this._currentFeatures[u].feature.properties;if(l===d.adcode){h=!0,this._currentFeatures.splice(u,1);break}}h||(r.push(p),this._polygonCache.splice(s,1),a.push(this._markerCache[s]),this._markerCache.splice(s,1),s--)}this._currentFeatures.forEach(s=>{const p=this._createPolygonFeature(s.feature,s.dataItems);this._opts.featureEventSupport&&(p.on("click",A.bind(h=>{this.emit("featureClick",h,s.feature),this._opts.featureClickToShowSub&&this._ins.zoomToShowSubFeatures(s.feature.properties.adcode)},this)),p.on("mouseover",A.bind(h=>{this.emit("featureMouseover",h,s.feature)},this)),p.on("mouseout",A.bind(h=>{this.emit("featureMouseout",h,s.feature)},this)));const l=this._createClusterMarker(s.feature,s.dataItems);this._opts.clusterMarkerEventSupport&&l.on("click",A.bind(h=>{this.emit("clusterMarkerClick",h,Vo({adcode:s.feature.properties.adcode},s)),this._opts.clusterMarkerEventSupport&&this._ins.zoomToShowSubFeatures(s.feature.properties.adcode)},this)),o.push(p),i.push(l)}),this.layer.remove(r),(t=this.markerGroup)===null||t===void 0||t.removeOverlays(a),this.layer.add(o),this._polygonCache.push(...o),o.length=0,(n=this.markerGroup)===null||n===void 0||n.addOverlays(i),this._markerCache.push(...i),i.length=0}_tryFreeMemery(){this._ins.getDistMgr().tryClearCache(this._currentRenderId,this._opts.areaNodeCacheLimit)}_increaseLoadLeft(){this._loadLeft++}_decreaseLoadLeft(t){this._loadLeft--,this._loadLeft===0&&this._checkLoadFinish(t)}_loadAndRenderSelf(t,n,o){this._ins.getDistMgr().touchAdcode(n,t);const r=this._ins._distMgr.getExplorer(),i=r.getLocalAreaNode(n);i?this._renderSelf(t,o,i):(this._increaseLoadLeft(),r.loadAreaNode(n,(a,s)=>{this.isRenderIdStillValid(t)&&(a?console.error(a):this._renderSelf(t,o,s),this._decreaseLoadLeft(t))},this))}_loadAndRenderSub(t,n){this._ins.getDistMgr().touchAdcode(n,t);const o=this._ins._distMgr.getExplorer(),r=o.getLocalAreaNode(n);r?this._renderSub(t,r):(this._increaseLoadLeft(),o.loadAreaNode(n,(i,a)=>{this.isRenderIdStillValid(t)&&(i?console.error(i):this._renderSub(t,a),this._decreaseLoadLeft(t))},this))}_prepRenderFeatureInPixel(t,n){if(!this._ins.getDistMgr().isExcludedAdcode(n.properties.adcode)){const o=this._ins.getDistCounter().getPackItemsByAdcode(n.properties.adcode);this._currentFeatures.push({feature:n,dataItems:o})}}_createPolygonFeature(t,n){const o=Object.assign({},t.properties);if(o.dataItems=n,this._opts.renderPolygon){const i=this._opts.renderPolygon(t,n),a=i.getExtData()||{};return a._data=o,i.setExtData(a),i}const r=this._getFeatureStyleOptions(t,n)||{};return new AMap.Polygon(Bp(Vo({path:t.geometry.coordinates},r),{extData:{_data:o}}))}_createClusterMarker(t,n){const o=t.properties;if(o.dataItems=n,this._opts.renderClusterMarker){const h=this._opts.renderClusterMarker(t,n),u=h.getExtData()||{};return u._data=o,h.setExtData(u),h}const r={title:"amap-ui-district-cluster-marker-title",body:"amap-ui-district-cluster-marker-body",container:"amap-ui-district-cluster-marker"},i=document.createElement("div"),a=document.createElement("span");a.className=r.title;const s=document.createElement("span");s.className=r.body,i.appendChild(a),i.appendChild(s);const p=[],l=[r.container,`level_${o.level}`,`adcode_${o.adcode}`];if(o.acroutes)for(let h=o.acroutes,u=0,d=h.length;u<d;u++)l.push(`descendant_of_${h[u]}`),u===d-1&&l.push(`child_of_${h[u]}`),u>0&&p.push(this._ins._distMgr.getNodeByAdcode(h[u]).name);return i.className=l.join(" "),p.length>0?(p.push(o.name),i.setAttribute("title",p.join(">"))):i.removeAttribute("title"),a.innerHTML=A.escapeHtml(o.name),s.innerHTML=n.length,new AMap.Marker({topWhenClick:!0,offset:new AMap.Pixel(-20,-30),content:i,position:o.center,extData:{_data:o}})}_getFeatureStyleOptions(t,n){const o=this._opts.getFeatureStyle,r=this._opts.featureStyleByLevel[t.properties.level];if(!o)return r;const i=o.call(null,t,n);return i?A.extend({},this._opts.featureStyleByLevel[t.properties.level],i):r}renderLater(t){this._renderLaterId||(this._renderLaterId=setTimeout(()=>{this.render()},t||100))}isRendering(){return this._isRendering}render(){this._renderLaterId&&(clearTimeout(this._renderLaterId),this._renderLaterId=null),this._isRendering=!0,this._ins._distMgr.onReady(this.renderViewport,this,!0)}getOption(t){return this._opts[t]}getOptions(){return this._opts}show(){var t;this.layer.show(),(t=this.markerGroup)===null||t===void 0||t.show()}hide(){var t;this.layer.hide(),(t=this.markerGroup)===null||t===void 0||t.hide()}clear(){var t;this.layer.clear(),(t=this.markerGroup)===null||t===void 0||t.clearOverlays(),this._polygonCache=[],this._markerCache=[]}setzIndex(t){this.layer.setzIndex(t)}getZooms(){return this._opts.zooms}destroy(){this._map.removeLayer(this.layer),this._map.remove(this.markerGroup),this._currentFeatures=[],this.clear(),this.layer=null,this._map=null,this._ins=null}}class Fp{constructor(t,n,o){this.x=t,this.y=n,this.idx=o}}var Tp=Object.defineProperty,Np=Object.defineProperties,jp=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,Rp=Object.prototype.hasOwnProperty,zp=Object.prototype.propertyIsEnumerable,qo=(e,t,n)=>t in e?Tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Up=(e,t)=>{for(var n in t||(t={}))Rp.call(t,n)&&qo(e,n,t[n]);if(Zo)for(var n of Zo(t))zp.call(t,n)&&qo(e,n,t[n]);return e},Wp=(e,t)=>Np(e,jp(t));class Gp extends Wt{constructor(t){super(),this._data={list:[],bounds:null,source:null},this._mouseEvent=A.bind(A.debounce(()=>{this.renderLater()},50),this);const n={autoSetFitView:!0,topAdcodes:[1e5],visible:!0,excludedAdcodes:null,zIndex:10,renderOptions:{}};this._opts=A.extend({},n,t),this.map=t.map,this._distMgr=new Mp({topAdcodes:this._opts.topAdcodes,excludedAdcodes:this._opts.excludedAdcodes}),this._distCounter=new Sp({distMgr:this._distMgr,pointPackerThisArg:this,pointPacker:o=>this._packDataItem(o)}),this.renderEngine=new Dp(this,Wp(Up({},t.renderOptions),{zIndex:this._opts.zIndex,visible:this._opts.visible,map:t.map})),this.renderEngine.on("*",(o,...r)=>{this.emit(o,...r)}),this._opts.data&&this.setData(this._opts.data),this.bindOrUnbindMapEvent()}bindOrUnbindMapEvent(t=!0){const n=t?"on":"off";this.map[n]("moveend",this._mouseEvent),this.map[n]("zoomend",this._mouseEvent),this.map[n]("resize",this._mouseEvent),this.map[n]("rotateend",this._mouseEvent),this.map[n]("dragend",this._mouseEvent)}getMinZoomToShowSub(t){return this.renderEngine.getMinZoomToShowSub(t)}getAreaNodeProps(t){return this._distMgr.getNodeByAdcode(t)}getDistrictExplorer(){return this._distMgr.getExplorer()}getRender(){return this.renderEngine}zoomToShowSubFeatures(t,n){this.renderEngine.zoomToShowSubFeatures(t,n)}renderLater(t){this.renderEngine.renderLater(t)}render(){this.renderEngine.render()}getDistMgr(){return this._distMgr}_clearData(){this.trigger("willClearData"),this._data?this._data.list.length=0:this._data={list:[],bounds:null},this._data.source=null,this._data.bounds=null,this._data.kdTree=null,this._distCounter.clearData(),this.trigger("didClearData")}_buildDataItems(t){const n=this._opts,o=n.getPosition,r=this._data.list,i=this._data.bounds;for(let a=0,s=t.length;a<s;a++){let p=t[a],l=o.call(this,p,a);l&&(l.getLng&&(l=[l.getLng(),l.getLat()]),r[a]=new Fp(l[0],l[1],a),i.expandByPoint(l[0],l[1]))}}getDataItemsByBounds(t){const n=this._data.kdTree;if(!n)return null;const o=t.getSouthWest(),r=t.getNorthEast(),i=this._data.list,a=n.range(o.getLng(),o.getLat(),r.getLng(),r.getLat()),s=[];for(let p=0,l=a.length;p<l;p++)s[p]=this._packDataItem(i[a[p]]);return s}_packDataItem(t){if(!t)return null;if(!t._packedItem){const n=t.idx,o=[t.x,t.y];t._packedItem={dataIndex:n,dataItem:this._data.source[n],position:o}}return t._packedItem}_buildData(t){this._clearData(),this.trigger("willBuildData",t),this._data.source=t,this._data.bounds=X.getBoundsItemToExpand(),this._buildDataItems(t),this._distCounter.setData(this._data.list),this.trigger("didBuildData",t)}setData(t){t||(t=[]),this._buildData(t),this.renderLater(10),t.length&&this._opts.autoSetFitView&&this.setFitView()}isReady(){return this._distMgr.isReady()&&!!this._data}setFitView(){const t=this._data.bounds,n=this.getMap(),o=new AMap.Bounds([t.x,t.y],[t.x+t.width,t.y+t.height]);n&&n.setBounds(o)}getDistCounter(){return this._distCounter}getMap(){return this._opts.map}getZooms(){return this.renderEngine.getZooms()}isHidden(){return!this._opts.visible}show(){return this._opts.visible=!0,this.getRender().show()}hide(){return this._opts.visible=!1,this.getRender().hide()}destroy(){this.bindOrUnbindMapEvent(!1),this.getRender().destroy(),this._distCounter.destroy(),this._distMgr.destroy(),this.renderEngine=null,this._data={list:[],bounds:null},this._distMgr=null,this.map=void 0,this._opts=void 0}getzIndex(){return this._opts.zIndex}setzIndex(t){this._opts.zIndex=t,this.getRender().setzIndex(t)}}(function(e){const t=document,n="appendChild",o="styleSheet",r=t.createElement("style");r.type="text/css",t.getElementsByTagName("head")[0][n](r),r[o]?r[o].cssText=e:r[n](t.createTextNode(e))})(".amap-ui-district-cluster-container{cursor:default;-webkit-backface-visibility:hidden;-webkit-transform:translateZ(0) scale(1,1)}.amap-ui-district-cluster-container canvas{position:absolute}.amap-ui-district-cluster-container .amap-ui-hide{display:none!important}.amap-ui-district-cluster-container .overlay-title,.amap-ui-district-cluster-marker{color:#555;background-color:#fffeef;font-size:12px;white-space:nowrap;position:absolute}.amap-ui-district-cluster-container .overlay-title{padding:2px 6px;display:inline-block;z-index:99999;border:1px solid #7e7e7e;border-radius:2px}.amap-ui-district-cluster-container .overlay-title:after,.amap-ui-district-cluster-container .overlay-title:before{content:'';display:block;position:absolute;margin:auto;width:0;height:0;border:solid transparent;border-width:5px}.amap-ui-district-cluster-container .overlay-title.left{transform:translate(10px,-50%)}.amap-ui-district-cluster-container .overlay-title.left:before{top:5px}.amap-ui-district-cluster-container .overlay-title.left:after{left:-9px;top:5px;border-right-color:#fffeef}.amap-ui-district-cluster-container .overlay-title.left:before{left:-10px;border-right-color:#7e7e7e}.amap-ui-district-cluster-container .overlay-title.top{transform:translate(-50%,-130%)}.amap-ui-district-cluster-container .overlay-title.top:before{left:0;right:0}.amap-ui-district-cluster-container .overlay-title.top:after{bottom:-9px;left:0;right:0;border-top-color:#fffeef}.amap-ui-district-cluster-container .overlay-title.top:before{bottom:-10px;border-top-color:#7e7e7e}.amap-ui-district-cluster-marker{border:1px solid #8e8e8e;width:auto;height:22px;border-radius:5px 5px 5px 0;left:0;top:0}.amap-ui-district-cluster-marker:after,.amap-ui-district-cluster-marker:before{content:'';display:block;position:absolute;width:0;height:0;border:solid rgba(0,0,0,0);border-width:6px;left:13px}.amap-ui-district-cluster-marker:after{bottom:-12px;border-top-color:#fffeef}.amap-ui-district-cluster-marker:before{bottom:-13px;border-top-color:#8e8e8e}.amap-ui-district-cluster-marker span{vertical-align:middle;padding:3px 5px;display:inline-block;height:16px;line-height:16px}.amap-ui-district-cluster-marker-title{border-radius:5px 0 0 0}.amap-ui-district-cluster-marker-body{background-color:#dc3912;color:#fff;border-radius:0 5px 5px 0}.amap-ui-district-cluster-marker.level_country .amap-ui-district-cluster-marker-body{background-color:#36c}.amap-ui-district-cluster-marker.level_province .amap-ui-district-cluster-marker-body{background-color:#dc3912}.amap-ui-district-cluster-marker.level_city .amap-ui-district-cluster-marker-body{background-color:#909}.amap-ui-district-cluster-marker.level_district .amap-ui-district-cluster-marker-body{background-color:#d47}");var Ho=y({name:"ElAmapLayerDistrictCluster",mixins:[g],props:{data:{required:!0,type:Array},getPosition:{type:Function},autoSetFitView:{type:Boolean,default:!0},topAdcodes:{type:Array},excludedAdcodes:{type:Array},renderOptions:{type:Object}},data(){return{}},methods:{__initComponent(e){e.map=this.$parentComponent,this.$amapComponent=new Gp(e)},destroyComponent(){this.$amapComponent.destroy(),this.$amapComponent=null,this.$parentComponent=null}},render(){return null}});Ho.__file="src/vue-amap/packages/layer/data/DistrictCluster/DistrictCluster.vue";const Jo=C(Ho);var Vp=[Ve,qe,Je,Xe,Qe,en,nn,on,an,pn,un,dn,cn,yn,gn,Cn,_n,bn,An,Mn,Sn,On,In,Bn,Fn,Nn,Rn,Un,Gn,Vn,qn,Jn,Xn,Qn,eo,oo,io,so,lo,ho,co,yo,Co,vo,$o,Jo],Yo=me([...Vp]);const Zp=Yo.install;export{Ve as ElAmap,Qn as ElAmapBezierCurve,eo as ElAmapCircle,Co as ElAmapCircleMarker,qe as ElAmapControlControlBar,yo as ElAmapControlGeolocation,Je as ElAmapControlHawkEye,Xe as ElAmapControlMapType,Qe as ElAmapControlScale,en as ElAmapControlToolBar,Un as ElAmapElasticMarker,oo as ElAmapEllipse,io as ElAmapGeojson,on as ElAmapInfoWindow,Gn as ElAmapLabelMarker,_n as ElAmapLayerBuildings,an as ElAmapLayerCanvas,pn as ElAmapLayerCustom,bn as ElAmapLayerDefault,An as ElAmapLayerDistrict,Jo as ElAmapLayerDistrictCluster,un as ElAmapLayerFlexible,dn as ElAmapLayerGlCustom,cn as ElAmapLayerHeatMap,yn as ElAmapLayerImage,Mn as ElAmapLayerIndoorMap,gn as ElAmapLayerLabels,Fn as ElAmapLayerMapboxVectorTile,Sn as ElAmapLayerRoadNet,On as ElAmapLayerSatellite,In as ElAmapLayerTile,co as ElAmapLayerTiles3d,Bn as ElAmapLayerTraffic,Cn as ElAmapLayerVector,vo as ElAmapLayerVideo,Nn as ElAmapLayerWms,Rn as ElAmapLayerWmts,Vn as ElAmapMarker,qn as ElAmapMarkerCluster,Jn as ElAmapMassMarks,$o as ElAmapMouseTool,so as ElAmapPolygon,lo as ElAmapPolyline,ho as ElAmapRectangle,nn as ElAmapSearchBox,Xn as ElAmapText,Yo as default,os as initAMapApiLoader,Zp as install,Z as lazyAMapApiLoaderInstance,me as makeInstaller,g as registerMixin};
//# sourceMappingURL=index.es.min.js.map
