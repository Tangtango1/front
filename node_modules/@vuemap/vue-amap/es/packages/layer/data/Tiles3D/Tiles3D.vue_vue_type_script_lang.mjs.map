{"version":3,"file":"Tiles3D.vue_vue_type_script_lang.mjs","sources":["../../../../../packages/layer/data/Tiles3D/Tiles3D.vue"],"sourcesContent":["<script lang=\"ts\">\r\nimport {defineComponent} from \"vue\";\r\nimport {registerMixin,loadScript} from '@vuemap/vue-amap-util';\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ElAmapLayerTiles3d',\r\n  mixins: [registerMixin],\r\n  props: {\r\n    url: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    threeScriptUrl: {\r\n      type: String,\r\n      default: '//a.amap.com/jsapi_demos/static/data3d/lib/three.117.js'\r\n    },\r\n    threeGltfLoader: {\r\n      type: String,\r\n      default: '//a.amap.com/jsapi_demos/static/data3d/lib/GLTFLoader.117.min.js'\r\n    },\r\n    layerStyle: {\r\n      type: Object\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n    };\r\n  },\r\n  methods: {\r\n    __initComponent(options) {\r\n      return new Promise<void>((resolve) => {\r\n        this.$parentComponent.plugin(['AMap.3DTilesLayer'], () => {\r\n          if(!window['THREE']){\r\n            loadScript(options.threeScriptUrl, () => {\r\n              loadScript(options.threeGltfLoader, () => {\r\n                this.createLayer(options);\r\n                resolve();\r\n              })\r\n            })\r\n          }else{\r\n            this.createLayer(options);\r\n            resolve();\r\n          }\r\n        });\r\n      });\r\n    },\r\n    destroyComponent() {\r\n      // this.$parentComponent.remove(this.$amapComponent);\r\n      this.$amapComponent = null;\r\n      this.$parentComponent = null;\r\n    },\r\n    createLayer(options){\r\n      let layerStyle = {};\r\n      if(options.layerStyle){\r\n        layerStyle = JSON.parse(JSON.stringify(options.layerStyle))\r\n      }\r\n      this.$amapComponent = new AMap['3DTilesLayer']({\r\n        map: this.$parentComponent,\r\n        url: options.url, // 3d Tiles 入口文件\r\n        style: layerStyle\r\n      });\r\n      console.log(this.$amapComponent)\r\n    }\r\n  },\r\n  render(){\r\n    return null;\r\n  }\r\n});\r\n</script>\r\n"],"names":[],"mappings":";;;AAKA,aAAe,eAAgB,CAAA;AAAA,EAC7B,IAAM,EAAA,oBAAA;AAAA,EACN,QAAQ,CAAC,aAAA,CAAA;AAAA,EACT,KAAO,EAAA;AAAA,IACL,GAAK,EAAA;AAAA,MACH,IAAM,EAAA,MAAA;AAAA,MACN,QAAU,EAAA,IAAA;AAAA,KAAA;AAAA,IAEZ,cAAgB,EAAA;AAAA,MACd,IAAM,EAAA,MAAA;AAAA,MACN,OAAS,EAAA,yDAAA;AAAA,KAAA;AAAA,IAEX,eAAiB,EAAA;AAAA,MACf,IAAM,EAAA,MAAA;AAAA,MACN,OAAS,EAAA,kEAAA;AAAA,KAAA;AAAA,IAEX,UAAY,EAAA;AAAA,MACV,IAAM,EAAA,MAAA;AAAA,KAAA;AAAA,GAAA;AAAA,EAGV,IAAO,GAAA;AACL,IAAO,OAAA,EAAA,CAAA;AAAA,GAAA;AAAA,EAGT,OAAS,EAAA;AAAA,IACP,gBAAgB,OAAS,EAAA;AACvB,MAAO,OAAA,IAAI,OAAc,CAAA,CAAC,OAAY,KAAA;AACpC,QAAA,IAAA,CAAK,gBAAiB,CAAA,MAAA,CAAO,CAAC,mBAAA,CAAA,EAAsB,MAAM;AACxD,UAAG,IAAA,CAAC,OAAO,OAAS,CAAA,EAAA;AAClB,YAAW,UAAA,CAAA,OAAA,CAAQ,gBAAgB,MAAM;AACvC,cAAW,UAAA,CAAA,OAAA,CAAQ,iBAAiB,MAAM;AACxC,gBAAA,IAAA,CAAK,WAAY,CAAA,OAAA,CAAA,CAAA;AACjB,gBAAA,OAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA;AAAA,aAAA,CAAA,CAAA;AAAA,WAGD,MAAA;AACH,YAAA,IAAA,CAAK,WAAY,CAAA,OAAA,CAAA,CAAA;AACjB,YAAA,OAAA,EAAA,CAAA;AAAA,WAAA;AAAA,SAAA,CAAA,CAAA;AAAA,OAAA,CAAA,CAAA;AAAA,KAAA;AAAA,IAKR,gBAAmB,GAAA;AAEjB,MAAA,IAAA,CAAK,cAAiB,GAAA,IAAA,CAAA;AACtB,MAAA,IAAA,CAAK,gBAAmB,GAAA,IAAA,CAAA;AAAA,KAAA;AAAA,IAE1B,YAAY,OAAQ,EAAA;AAClB,MAAA,IAAI,UAAa,GAAA,EAAA,CAAA;AACjB,MAAA,IAAG,QAAQ,UAAW,EAAA;AACpB,QAAA,UAAA,GAAa,IAAK,CAAA,KAAA,CAAM,IAAK,CAAA,SAAA,CAAU,OAAQ,CAAA,UAAA,CAAA,CAAA,CAAA;AAAA,OAAA;AAEjD,MAAK,IAAA,CAAA,cAAA,GAAiB,IAAI,IAAA,CAAK,cAAgB,CAAA,CAAA;AAAA,QAC7C,KAAK,IAAK,CAAA,gBAAA;AAAA,QACV,KAAK,OAAQ,CAAA,GAAA;AAAA,QACb,KAAO,EAAA,UAAA;AAAA,OAAA,CAAA,CAAA;AAET,MAAA,OAAA,CAAQ,IAAI,IAAK,CAAA,cAAA,CAAA,CAAA;AAAA,KAAA;AAAA,GAAA;AAAA,EAGrB,MAAQ,GAAA;AACN,IAAO,OAAA,IAAA,CAAA;AAAA,GAAA;AAAA,CAAA,CAAA;;;;"}