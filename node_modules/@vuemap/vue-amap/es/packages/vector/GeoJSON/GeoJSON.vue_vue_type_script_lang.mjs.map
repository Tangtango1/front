{"version":3,"file":"GeoJSON.vue_vue_type_script_lang.mjs","sources":["../../../../packages/vector/GeoJSON/GeoJSON.vue"],"sourcesContent":["<script lang=\"ts\">\r\nimport {defineComponent} from \"vue\";\r\nimport {merge} from 'lodash-es';\r\nimport {registerMixin,isMapInstance, isOverlayGroupInstance, isVectorLayerInstance} from '@vuemap/vue-amap-util';\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ElAmapGeojson',\r\n  mixins: [registerMixin],\r\n  props: {\r\n    geo: {\r\n      type: Object,\r\n      required: true\r\n    }, // 要加载的标准GeoJSON对象\r\n    markerOptions: {\r\n      type: Object\r\n    }, // marker的默认样式\r\n    getMarker: {\r\n      type: Function\r\n    }, // 指定点要素的绘制方式，缺省时为Marker的默认样式。geojson为当前要素对应的GeoJSON对象，lnglats为对应的线的路径\r\n    polylineOptions: {\r\n      type: Object\r\n    }, // polyline的默认样式\r\n    getPolyline: {\r\n      type: Function\r\n    }, // 指定线要素的绘制方式，缺省时为Polyline的默认样式。geojson为当前要素对应的GeoJSON对象，lnglats为对应的线的路径\r\n    polygonOptions: {\r\n      type: Object\r\n    }, // polygon的默认样式\r\n    getPolygon: {\r\n      type: Function\r\n    } // 指定面要素的绘制方式，缺省时为Polygon的默认样式。geojson为当前要素对应的GeoJSON对象，lnglats为对应的线的路径\r\n  },\r\n  data() {\r\n    return {\r\n      propsRedirect: {\r\n        geo: 'geoJSON'\r\n      },\r\n      converters: {},\r\n    };\r\n  },\r\n  methods: {\r\n    __initComponent(options) {\r\n      return new Promise<void>((resolve) => {\r\n        AMap.plugin(['AMap.GeoJSON'], () => {\r\n          if (!options.getMarker) {\r\n            options.getMarker = this.createMarker;\r\n          }\r\n          if (!options.getPolyline) {\r\n            options.getPolyline = this.createPolyline;\r\n          }\r\n          if (!options.getPolygon) {\r\n            options.getPolygon = this.createPolygon;\r\n          }\r\n          this.$amapComponent = new AMap.GeoJSON(options);\r\n          this.$parentComponent.add(this.$amapComponent);\r\n          resolve();\r\n        });\r\n      });\r\n    },\r\n    createMarker(geojson, lnglat) {\r\n      let options = this.markerOptions || {};\r\n      options = merge({}, options, geojson.properties);\r\n      options.position = lnglat;\r\n      return new AMap.Marker(options);\r\n    },\r\n    createPolyline(geojson, lnglat) {\r\n      let options = this.polylineOptions || {};\r\n      options = merge({}, options, geojson.properties);\r\n      options.path = lnglat;\r\n      return new AMap.Polyline(options);\r\n    },\r\n    createPolygon(geojson, lnglat) {\r\n      let options = this.polygonOptions || {};\r\n      options = merge({}, options, geojson.properties);\r\n      options.path = lnglat;\r\n      return new AMap.Polygon(options);\r\n    },\r\n    destroyComponent() {\r\n      if(!this.parentInstance.isDestroy){\r\n        this.$parentComponent.remove(this.$amapComponent);\r\n      }\r\n      this.$amapComponent = null;\r\n      this.$parentComponent = null;\r\n    },\r\n    __geoJSON(value) {\r\n      if(this.$amapComponent){\r\n        this.$amapComponent.importData(value);\r\n      }\r\n    }\r\n  },\r\n  render(){\r\n    return null;\r\n  }\r\n});\r\n</script>\r\n"],"names":[],"mappings":"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"}