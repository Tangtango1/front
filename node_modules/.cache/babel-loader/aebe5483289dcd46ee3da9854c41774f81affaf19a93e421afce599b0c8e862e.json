{"ast":null,"code":"import router from '@/router/router-static';\nexport default {\n  data() {\n    return {\n      sessionTable: '',\n      //登录账户所在表名\n      role: '',\n      //权限\n      userId: '',\n      //当前登录人的id\n\n      echartsDate: new Date() //echarts的时间查询字段\n    };\n  },\n  mounted() {\n    //获取当前登录用户的信息\n    this.sessionTable = this.$storage.get('sessionTable');\n    this.role = this.$storage.get('role');\n    this.userId = this.$storage.get('userId');\n    this.init();\n    this.chartDialog1();\n    this.chartDialog2();\n  },\n  methods: {\n    chartDialog1() {\n      let _this = this;\n      // this.$nextTick(()=>{\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic1\"),'macarons');\n      //   let params = {\n      //     tableName: \"wuzi\",\n      //     groupColumn: \"wuzi_types\",\n      //   }\n      //   this.$http({\n      //     url: \"newSelectGroupCount\",//pieSum pieCount\n      //     method: \"get\",\n      //     params: params\n      //   }).then(({data}) => {\n      //     if (data && data.code === 0) {\n      //       let res = data.data;\n      //       let xAxis = [];\n      //       let yAxis = [];\n      //       let pArray = []\n      //       var option = {};\n      //       for(let i=0;i<res.length;i++){\n      //         xAxis.push(res[i].name);\n      //         yAxis.push(res[i].value);\n      //         pArray.push({\n      //           value: res[i].value,\n      //           name: res[i].name\n      //         })\n      //         option = {\n      //           title: {\n      //             text: '物资类型分布图',\n      //             left: 'center'\n      //           },\n      //           tooltip: {\n      //             trigger: 'item',\n      //             formatter: '{b} : {c} ({d}%)'\n      //           },\n      //           legend: {\n      //             orient: 'vertical',\n      //             left: 'left'\n      //           },\n      //           series: [\n      //             {\n      //               type: 'pie',\n      //               radius: '55%',\n      //               center: ['50%', '60%'],\n      //               data: pArray,\n      //               emphasis: {\n      //                 itemStyle: {\n      //                   shadowBlur: 10,\n      //                   shadowOffsetX: 0,\n      //                   shadowColor: 'rgba(0, 0, 0, 0.5)'\n      //                 }\n      //               }\n      //             }\n      //           ]\n      //         };\n      //       }\n      //       statistic.setOption(option,true);\n      //       window.onresize = function() {\n      //         statistic.resize();\n      //       };\n      //     }\n      //   });\n      // })\n\n      // let params = {\n      //   dateFormat :\"%Y\", //%Y-%m\n      //   riqi :getYearFormat(_this.echartsDate),//年\n      //   // riqi :getMonthFormat(_this.echartsDate),//年月\n      //   thisTable : {//当前表\n      //     tableName :'shangpin',//当前表表名,\n      //     sumColum : 'shangpin_number', //求和字段\n      //     date : 'insert_time',//分组日期字段\n      //     // string : 'shangpin_name',//分组字符串字段\n      //     // types : 'shangpin_types',//分组下拉框字段\n      //   },\n      //   // joinTable : {//级联表（可以不存在）\n      //   //     tableName :'yonghu',//级联表表名\n      //   //     // date : 'insert_time',//分组日期字段\n      //   //     string : 'yonghu_name',//分组字符串字段\n      //   //     // types : 'yonghu_types',//分组下拉框字段\n      //   // }\n      // }\n      // _this.chartVisiable = true;\n      // _this.$nextTick(() => {\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic1\"), 'macarons');\n      //   this.$http({\n      //     url: \"barSum\",//barCountOne barCountTwo barSumOne barSumTwo\n      //     method: \"get\",\n      //     params: params\n      //   }).then(({data}) => {\n      //     if(data && data.code === 0){\n      //       let yAxisName = \"数值\";//y轴\n      //       let xAxisName = \"月份\";//x轴\n      //       let series = [];//具体数据值\n      //       data.data.yAxis.forEach(function (item,index) {//点击可关闭的按钮字符串在后台方法中\n      //         let tempMap = {};\n      //         tempMap.name=data.data.legend[index];\n      //         tempMap.type='bar';\n      //         tempMap.data=item;\n      //         series.push(tempMap);\n      //       })\n      //\n      //       var option = {\n      //         tooltip: {\n      //           trigger: 'axis',\n      //           axisPointer: {\n      //             type: 'cross',\n      //             crossStyle: {\n      //               color: '#999'\n      //             }\n      //           }\n      //         },\n      //         toolbox: {\n      //           feature: {\n      //             // dataView: { show: true, readOnly: false },  // 数据查看\n      //             magicType: { show: true, type: ['line', 'bar'] },//切换图形展示方式\n      //             // restore: { show: true }, // 刷新\n      //             saveAsImage: { show: true }//保存\n      //           }\n      //         },\n      //         legend: {\n      //           data: data.data.legend//标题  可以点击导致某一列数据消失\n      //         },\n      //         xAxis: [\n      //           {\n      //             type: 'category',\n      //             axisLabel:{interval: 0},\n      //             name: xAxisName,\n      //             data: data.data.xAxis,\n      //             axisPointer: {\n      //               type: 'shadow'\n      //             }\n      //           }\n      //         ],\n      //         yAxis: [\n      //           {\n      //             type: 'value',//不能改\n      //             name: yAxisName,//y轴单位\n      //             axisLabel: {\n      //               formatter: '{value}' // 后缀\n      //             }\n      //           }\n      //         ],\n      //         series:series//具体数据\n      //       };\n      //       statistic.setOption(option,true);\n      //       window.onresize = function () {\n      //         statistic.resize();\n      //       };\n      //     }else {\n      //       this.$message({\n      //         message: \"报表未查询到数据\",\n      //         type: \"success\",\n      //         duration: 1500,\n      //         onClose: () => {\n      //           this.search();\n      //         }\n      //       });\n      //     }\n      //   });\n      // });\n    },\n    chartDialog2() {\n      let _this = this;\n      // this.$nextTick(()=>{\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic2\"),'macarons');\n      //\n      //   var year = _this.echartsDate.getFullYear();\n      //   var month = _this.echartsDate.getMonth() + 1 < 10 ? '0' + (_this.echartsDate.getMonth() + 1) : _this.echartsDate.getMonth() + 1;\n      //   var riqi=year + \"-\" + month;\n      //\n      //   this.$http({\n      //     url: \"pieSum\",//pieSum pieCount\n      //     method: \"get\",\n      //     params: {\n      //       riqi :riqi\n      //     }\n      //   }).then(({data}) => {\n      //     if (data && data.code === 0) {\n      //       let res = data.data;\n      //       let xAxis = [];\n      //       let yAxis = [];\n      //       let pArray = []\n      //       var option = {};\n      //       for(let i=0;i<res.length;i++){\n      //         xAxis.push(res[i].name);\n      //         yAxis.push(res[i].value);\n      //         pArray.push({\n      //           value: res[i].value,\n      //           name: res[i].name\n      //         })\n      //         option = {\n      //           title: {\n      //             text: '物资月度申请统计报表',\n      //             left: 'center'\n      //           },\n      //           tooltip: {\n      //             trigger: 'item',\n      //             formatter: '{b} : {c} ({d}%)'\n      //           },\n      //           legend: {\n      //             orient: 'vertical',\n      //             left: 'left'\n      //           },\n      //           series: [\n      //             {\n      //               type: 'pie',\n      //               radius: '55%',\n      //               center: ['50%', '60%'],\n      //               data: pArray,\n      //               emphasis: {\n      //                 itemStyle: {\n      //                   shadowBlur: 10,\n      //                   shadowOffsetX: 0,\n      //                   shadowColor: 'rgba(0, 0, 0, 0.5)'\n      //                 }\n      //               }\n      //             }\n      //           ]\n      //         };\n      //       }\n      //       statistic.setOption(option,true);\n      //       window.onresize = function() {\n      //         statistic.resize();\n      //       };\n      //     }\n      //   });\n      // })\n    },\n    init() {\n      if (this.$storage.get('Token')) {\n        this.$http({\n          url: `${this.$storage.get('sessionTable')}/session`,\n          method: 'get'\n        }).then(({\n          data\n        }) => {\n          if (data && data.code != 0) {\n            router.push({\n              name: 'login'\n            });\n          }\n        });\n      } else {\n        router.push({\n          name: 'login'\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["router","data","sessionTable","role","userId","echartsDate","Date","mounted","$storage","get","init","chartDialog1","chartDialog2","methods","_this","$http","url","method","then","code","push","name"],"sources":["D:\\bise\\bise\\front\\src\\views\\home.vue"],"sourcesContent":["<template>\n  <div class=\"content\">\n    <!--  <div style=\"width: 100%;height: 100%\" v-if=\"sessionTable!='users'\">-->\n    <div style=\"width: 100%; height: 100%\">\n      <div class=\"text main-text\">欢迎使用 {{ this.$project.projectName }}</div>\n    </div>\n    <div\n      style=\"width: 100%; height: 100%; display: flex\"\n      v-if=\"sessionTable == 'users' && false\"\n    >\n      <div style=\"width: 50%; height: 100%\">\n        <div id=\"statistic1\" style=\"width: 100%; height: 600px\"></div>\n      </div>\n      <div style=\"width: 50%; height: 100%\">\n        <el-date-picker v-model=\"echartsDate\" type=\"month\" placeholder=\"选择月\">\n        </el-date-picker>\n        <el-button @click=\"chartDialog2()\">查询</el-button>\n        <div id=\"statistic2\" style=\"width: 100%; height: 600px\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport router from '@/router/router-static'\nexport default {\n  data() {\n    return {\n      sessionTable: '', //登录账户所在表名\n      role: '', //权限\n      userId: '', //当前登录人的id\n\n      echartsDate: new Date(), //echarts的时间查询字段\n    }\n  },\n  mounted() {\n    //获取当前登录用户的信息\n    this.sessionTable = this.$storage.get('sessionTable')\n    this.role = this.$storage.get('role')\n    this.userId = this.$storage.get('userId')\n\n    this.init()\n    this.chartDialog1()\n    this.chartDialog2()\n  },\n  methods: {\n    chartDialog1() {\n      let _this = this\n      // this.$nextTick(()=>{\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic1\"),'macarons');\n      //   let params = {\n      //     tableName: \"wuzi\",\n      //     groupColumn: \"wuzi_types\",\n      //   }\n      //   this.$http({\n      //     url: \"newSelectGroupCount\",//pieSum pieCount\n      //     method: \"get\",\n      //     params: params\n      //   }).then(({data}) => {\n      //     if (data && data.code === 0) {\n      //       let res = data.data;\n      //       let xAxis = [];\n      //       let yAxis = [];\n      //       let pArray = []\n      //       var option = {};\n      //       for(let i=0;i<res.length;i++){\n      //         xAxis.push(res[i].name);\n      //         yAxis.push(res[i].value);\n      //         pArray.push({\n      //           value: res[i].value,\n      //           name: res[i].name\n      //         })\n      //         option = {\n      //           title: {\n      //             text: '物资类型分布图',\n      //             left: 'center'\n      //           },\n      //           tooltip: {\n      //             trigger: 'item',\n      //             formatter: '{b} : {c} ({d}%)'\n      //           },\n      //           legend: {\n      //             orient: 'vertical',\n      //             left: 'left'\n      //           },\n      //           series: [\n      //             {\n      //               type: 'pie',\n      //               radius: '55%',\n      //               center: ['50%', '60%'],\n      //               data: pArray,\n      //               emphasis: {\n      //                 itemStyle: {\n      //                   shadowBlur: 10,\n      //                   shadowOffsetX: 0,\n      //                   shadowColor: 'rgba(0, 0, 0, 0.5)'\n      //                 }\n      //               }\n      //             }\n      //           ]\n      //         };\n      //       }\n      //       statistic.setOption(option,true);\n      //       window.onresize = function() {\n      //         statistic.resize();\n      //       };\n      //     }\n      //   });\n      // })\n\n      // let params = {\n      //   dateFormat :\"%Y\", //%Y-%m\n      //   riqi :getYearFormat(_this.echartsDate),//年\n      //   // riqi :getMonthFormat(_this.echartsDate),//年月\n      //   thisTable : {//当前表\n      //     tableName :'shangpin',//当前表表名,\n      //     sumColum : 'shangpin_number', //求和字段\n      //     date : 'insert_time',//分组日期字段\n      //     // string : 'shangpin_name',//分组字符串字段\n      //     // types : 'shangpin_types',//分组下拉框字段\n      //   },\n      //   // joinTable : {//级联表（可以不存在）\n      //   //     tableName :'yonghu',//级联表表名\n      //   //     // date : 'insert_time',//分组日期字段\n      //   //     string : 'yonghu_name',//分组字符串字段\n      //   //     // types : 'yonghu_types',//分组下拉框字段\n      //   // }\n      // }\n      // _this.chartVisiable = true;\n      // _this.$nextTick(() => {\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic1\"), 'macarons');\n      //   this.$http({\n      //     url: \"barSum\",//barCountOne barCountTwo barSumOne barSumTwo\n      //     method: \"get\",\n      //     params: params\n      //   }).then(({data}) => {\n      //     if(data && data.code === 0){\n      //       let yAxisName = \"数值\";//y轴\n      //       let xAxisName = \"月份\";//x轴\n      //       let series = [];//具体数据值\n      //       data.data.yAxis.forEach(function (item,index) {//点击可关闭的按钮字符串在后台方法中\n      //         let tempMap = {};\n      //         tempMap.name=data.data.legend[index];\n      //         tempMap.type='bar';\n      //         tempMap.data=item;\n      //         series.push(tempMap);\n      //       })\n      //\n      //       var option = {\n      //         tooltip: {\n      //           trigger: 'axis',\n      //           axisPointer: {\n      //             type: 'cross',\n      //             crossStyle: {\n      //               color: '#999'\n      //             }\n      //           }\n      //         },\n      //         toolbox: {\n      //           feature: {\n      //             // dataView: { show: true, readOnly: false },  // 数据查看\n      //             magicType: { show: true, type: ['line', 'bar'] },//切换图形展示方式\n      //             // restore: { show: true }, // 刷新\n      //             saveAsImage: { show: true }//保存\n      //           }\n      //         },\n      //         legend: {\n      //           data: data.data.legend//标题  可以点击导致某一列数据消失\n      //         },\n      //         xAxis: [\n      //           {\n      //             type: 'category',\n      //             axisLabel:{interval: 0},\n      //             name: xAxisName,\n      //             data: data.data.xAxis,\n      //             axisPointer: {\n      //               type: 'shadow'\n      //             }\n      //           }\n      //         ],\n      //         yAxis: [\n      //           {\n      //             type: 'value',//不能改\n      //             name: yAxisName,//y轴单位\n      //             axisLabel: {\n      //               formatter: '{value}' // 后缀\n      //             }\n      //           }\n      //         ],\n      //         series:series//具体数据\n      //       };\n      //       statistic.setOption(option,true);\n      //       window.onresize = function () {\n      //         statistic.resize();\n      //       };\n      //     }else {\n      //       this.$message({\n      //         message: \"报表未查询到数据\",\n      //         type: \"success\",\n      //         duration: 1500,\n      //         onClose: () => {\n      //           this.search();\n      //         }\n      //       });\n      //     }\n      //   });\n      // });\n    },\n    chartDialog2() {\n      let _this = this\n      // this.$nextTick(()=>{\n      //   var statistic = this.$echarts.init(document.getElementById(\"statistic2\"),'macarons');\n      //\n      //   var year = _this.echartsDate.getFullYear();\n      //   var month = _this.echartsDate.getMonth() + 1 < 10 ? '0' + (_this.echartsDate.getMonth() + 1) : _this.echartsDate.getMonth() + 1;\n      //   var riqi=year + \"-\" + month;\n      //\n      //   this.$http({\n      //     url: \"pieSum\",//pieSum pieCount\n      //     method: \"get\",\n      //     params: {\n      //       riqi :riqi\n      //     }\n      //   }).then(({data}) => {\n      //     if (data && data.code === 0) {\n      //       let res = data.data;\n      //       let xAxis = [];\n      //       let yAxis = [];\n      //       let pArray = []\n      //       var option = {};\n      //       for(let i=0;i<res.length;i++){\n      //         xAxis.push(res[i].name);\n      //         yAxis.push(res[i].value);\n      //         pArray.push({\n      //           value: res[i].value,\n      //           name: res[i].name\n      //         })\n      //         option = {\n      //           title: {\n      //             text: '物资月度申请统计报表',\n      //             left: 'center'\n      //           },\n      //           tooltip: {\n      //             trigger: 'item',\n      //             formatter: '{b} : {c} ({d}%)'\n      //           },\n      //           legend: {\n      //             orient: 'vertical',\n      //             left: 'left'\n      //           },\n      //           series: [\n      //             {\n      //               type: 'pie',\n      //               radius: '55%',\n      //               center: ['50%', '60%'],\n      //               data: pArray,\n      //               emphasis: {\n      //                 itemStyle: {\n      //                   shadowBlur: 10,\n      //                   shadowOffsetX: 0,\n      //                   shadowColor: 'rgba(0, 0, 0, 0.5)'\n      //                 }\n      //               }\n      //             }\n      //           ]\n      //         };\n      //       }\n      //       statistic.setOption(option,true);\n      //       window.onresize = function() {\n      //         statistic.resize();\n      //       };\n      //     }\n      //   });\n      // })\n    },\n    init() {\n      if (this.$storage.get('Token')) {\n        this.$http({\n          url: `${this.$storage.get('sessionTable')}/session`,\n          method: 'get',\n        }).then(({ data }) => {\n          if (data && data.code != 0) {\n            router.push({ name: 'login' })\n          }\n        })\n      } else {\n        router.push({ name: 'login' })\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  min-height: 500px;\n  text-align: center;\n  .main-text {\n    font-size: 38px;\n    font-weight: bold;\n    margin-top: 15%;\n  }\n  .text {\n    font-size: 24px;\n    font-weight: bold;\n    color: #333;\n  }\n}\n</style>\n"],"mappings":"AAwBA,OAAOA,MAAK,MAAO,wBAAuB;AAC1C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,EAAE;MAAE;MAClBC,IAAI,EAAE,EAAE;MAAE;MACVC,MAAM,EAAE,EAAE;MAAE;;MAEZC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAAE;IAC3B;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACL,YAAW,GAAI,IAAI,CAACM,QAAQ,CAACC,GAAG,CAAC,cAAc;IACpD,IAAI,CAACN,IAAG,GAAI,IAAI,CAACK,QAAQ,CAACC,GAAG,CAAC,MAAM;IACpC,IAAI,CAACL,MAAK,GAAI,IAAI,CAACI,QAAQ,CAACC,GAAG,CAAC,QAAQ;IAExC,IAAI,CAACC,IAAI,CAAC;IACV,IAAI,CAACC,YAAY,CAAC;IAClB,IAAI,CAACC,YAAY,CAAC;EACpB,CAAC;EACDC,OAAO,EAAE;IACPF,YAAYA,CAAA,EAAG;MACb,IAAIG,KAAI,GAAI,IAAG;MACf;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACF,CAAC;IACDF,YAAYA,CAAA,EAAG;MACb,IAAIE,KAAI,GAAI,IAAG;MACf;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACF,CAAC;IACDJ,IAAIA,CAAA,EAAG;MACL,IAAI,IAAI,CAACF,QAAQ,CAACC,GAAG,CAAC,OAAO,CAAC,EAAE;QAC9B,IAAI,CAACM,KAAK,CAAC;UACTC,GAAG,EAAE,GAAG,IAAI,CAACR,QAAQ,CAACC,GAAG,CAAC,cAAc,CAAC,UAAU;UACnDQ,MAAM,EAAE;QACV,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;UAAEjB;QAAK,CAAC,KAAK;UACpB,IAAIA,IAAG,IAAKA,IAAI,CAACkB,IAAG,IAAK,CAAC,EAAE;YAC1BnB,MAAM,CAACoB,IAAI,CAAC;cAAEC,IAAI,EAAE;YAAQ,CAAC;UAC/B;QACF,CAAC;MACH,OAAO;QACLrB,MAAM,CAACoB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAQ,CAAC;MAC/B;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}